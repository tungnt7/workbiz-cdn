(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bdb3a01"],{"040b":function(t,e,s){},"0e8f":function(t,e,s){"use strict";s.d(e,"c",(function(){return n})),s.d(e,"d",(function(){return r})),s.d(e,"b",(function(){return c})),s.d(e,"e",(function(){return l})),s.d(e,"a",(function(){return o}));var a=s("b775"),i="/department";function n(t){return Object(a["a"])({url:i,method:"get",params:t})}function r(t){return Object(a["a"])({url:i+"/leader",method:"get",params:t})}function c(t){return Object(a["a"])({url:i+"/"+t,method:"get"})}function l(t,e){return Object(a["a"])({url:i+"/"+t+"/update",method:"post",data:e})}function o(t){return Object(a["a"])({url:i,method:"post",data:t})}},"9edc":function(t,e,s){},c430b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ww-tasks ww-tasks-only"},[s("el-row",[s("el-col",{attrs:{span:t.isSelectId?6:18}},[s("div",{staticClass:"ww-tasks__left"},[s("div",{staticClass:"ww-tasks__left--tabs ww-tabs"},[t.isSelectId?s("div",{staticClass:"search-box"},[s("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Tìm kiếm công việc",clearable:""}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1):t._e(),s("el-tabs",{style:t.isSelectId?"--display:none":"--display: initial",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"Công việc",name:"first"}},[t.isSelectId?t._e():s("tab-header",{attrs:{"is-show-assignee":void 0!==t.project_id},on:{transfer:t.received}}),t._l(t.tasks,(function(e){return s("task-item",{key:e.task_id,class:{active:e.task_id==t.selectedId},attrs:{task:e,"is-show-project":t.isShowProject,"show-action":!t.isSelectId}})}))],2),s("el-tab-pane",{attrs:{label:"Nhân viên của tôi",name:"second"}},[t._v("Nhân viên của tôi")]),s("el-tab-pane",{attrs:{label:"Đang theo dõi",name:"third"}},[t._v("Đang theo dõi")]),s("el-tab-pane",{attrs:{label:"Công việc lặp lại",name:"fourth"}},[t._v("Cồng việc lặp lại")])],1)],1)])]),s("el-col",{directives:[{name:"show",rawName:"v-show",value:t.isSelectId,expression:"isSelectId"}],staticClass:"detail-wrapper custom-scroll",attrs:{span:12}},[s("a",{staticClass:"close-detail",on:{click:t.closeDetail}},[s("svg-icon",{attrs:{"icon-class":"plus"}})],1),t.isSelectId?s("task-detail",{attrs:{"task-id":t.selectedId}}):t._e()],1),s("el-col",{staticClass:"custom-scroll",attrs:{span:6}},[s("right-bar",{attrs:{"percen-task-done":50,"project-of-me":!0}})],1)],1)],1)},i=[],n=s("1da1"),r=(s("96cf"),s("caad"),s("2532"),s("4de4"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-header"},[s("div",{staticClass:"tab-header__action"},[s("a",{staticClass:"action-new",on:{click:function(e){return t.callTaskForm()}}},[s("el-button",{attrs:{type:"primary",size:"small",circle:""}},[s("svg-icon",{attrs:{"icon-class":"plus"}})],1),s("span",[t._v("Tạo mới công việc")])],1)]),s("div",{staticClass:"tab-header__filter"},[t.isShowAssignee?s("el-select",{attrs:{size:"mini",filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"@Tên người xử lý"},on:{change:t.change},model:{value:t.filter.assignee_id,callback:function(e){t.$set(t.filter,"assignee_id",e)},expression:"filter.assignee_id"}},[s("el-option",{staticClass:"custom-item",attrs:{label:"Chưa gán",value:"-1"}}),t._l(t.users,(function(t){return s("el-option",{key:t.user_id,staticClass:"custom-item",attrs:{label:t.name,value:t.user_id}})}))],2):t._e(),s("el-select",{staticClass:"item item__state",attrs:{size:"small",clearable:"",placeholder:"Tất cả trạng thái"},on:{change:t.change},model:{value:t.filter.state,callback:function(e){t.$set(t.filter,"state",e)},expression:"filter.state"}},t._l(t.states,(function(t){return s("el-option",{key:t.value,staticClass:"custom-item",attrs:{label:t.title,value:t.value}})})),1),s("el-select",{staticClass:"item",attrs:{size:"small",filterable:"",clearable:"",placeholder:"Tất cả dự án"},on:{change:t.change},model:{value:t.filter.project_id,callback:function(e){t.$set(t.filter,"project_id",e)},expression:"filter.project_id"}},t._l(t.projectsFilter,(function(t){return s("el-option",{key:t.project_id,staticClass:"custom-item",attrs:{label:t.name,value:t.project_id}})})),1),s("el-select",{staticClass:"item",attrs:{size:"small",clearable:"",placeholder:"Department"},on:{change:t.change},model:{value:t.filter.department_id,callback:function(e){t.$set(t.filter,"department_id",e)},expression:"filter.department_id"}},t._l(t.departments,(function(t){return s("el-option",{key:t.department_id,staticClass:"custom-item",attrs:{label:t.name,value:t.department_id}})})),1)],1),s("task-form",{ref:"taskForm",attrs:{"project-id":t.$store.getters.selectedProjectId,"is-show-project-select":!0}})],1)}),c=[],l=s("c24f"),o=s("cc1d"),u=s("24d2"),d=s("0e8f"),p=s("8266"),f={components:{TaskForm:p["a"]},props:{isShowAssignee:{type:Boolean,default:!1}},data:function(){return{mState:null,mProject:null,mDepartment:null,mUpdateTime:null,mUser:null,listQuery:{},users:[],userLoading:!1,states:Object(o["q"])(),projects:{},departments:{},filter:{assignee_id:"",department_id:"",state:"",project_id:""}}},computed:{projectsFilter:function(){var t=this;return""===t.filter.department_id?this.projects:this.projects.filter((function(e){return e.department_id===t.filter.department_id}))}},watch:{isShowAssignee:function(){this.filter={assignee_id:"",department_id:"",state:"",project_id:""}}},mounted:function(){this.fetch()},methods:{fetch:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["i"])();case 2:return t.projects=e.sent.data,e.next=5,Object(d["d"])();case 5:return t.departments=e.sent.data,e.next=8,Object(l["j"])().then((function(e){t.users=e.data.data}));case 8:case"end":return e.stop()}}),e)})))()},callTaskForm:function(){this.$refs.taskForm.callDialog()},change:function(){this.$emit("transfer",this.filter)}}},m=f,h=(s("e0a5"),s("2877")),_=Object(h["a"])(m,r,c,!1,null,null,null),b=_.exports,v=s("8fe3"),k=s("7f6d"),g=s("828d"),j={components:{TabHeader:b,TaskItem:v["a"],RightBar:g["a"],TaskDetail:k["a"]},data:function(){return{activeName:"first",tabs:[{tasks:"Công việc"},{"my-staff":"Nhân viên của tôi"},{subscribe:"Đang theo dõi"},{"task-repeat":"Công việc lặp lại"}],filter:{}}},computed:{project_id:function(){return this.$route.query.project_id},user_id:function(){return this.$store.getters.user_id},isMyTask:function(){return void 0===this.$route.query.project_id},isShowProject:function(){return this.$route.path.includes("/summery/task/index")&&0===this.selectedId},tasks:function(){return this.$store.getters["task/tasksByDepartmentGroupMe"]},selectedId:{get:function(){return this.$store.getters.selectedTaskId||0},set:function(t){this.$store.dispatch("task/setSelectedTask",t)}},isSelectId:function(){return!!this.$store.getters.selectedTaskId}},watch:{project_id:function(t){this.filter={},this.fetch()}},mounted:function(){this.fetch()},methods:{fetch:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.commit("project/SET_SELECTED_PROJECT",""),void 0===t.project_id&&(t.filter.my_tasks=!0),t.$store.dispatch("task/getTasksByDepartmentAndGroups",{projectId:t.project_id||"in",params:t.filter});case 3:case"end":return e.stop()}}),e)})))()},handleClick:function(){},received:function(t){this.filter=t,this.fetch()},closeDetail:function(){this.selectedId=null}}},w=j,C=(s("f629"),Object(h["a"])(w,a,i,!1,null,null,null));e["default"]=C.exports},e0a5:function(t,e,s){"use strict";s("9edc")},f629:function(t,e,s){"use strict";s("040b")}}]);