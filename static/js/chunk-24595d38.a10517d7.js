(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24595d38"],{"01f4":function(t,e,a){},"0e8f":function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"e",(function(){return l})),a.d(e,"a",(function(){return c}));var r=a("b775"),n="/department";function s(t){return Object(r["a"])({url:n,method:"get",params:t})}function i(t){return Object(r["a"])({url:n+"/leader",method:"get",params:t})}function o(t){return Object(r["a"])({url:n+"/"+t,method:"get"})}function l(t,e){return Object(r["a"])({url:n+"/"+t+"/update",method:"post",data:e})}function c(t){return Object(r["a"])({url:n,method:"post",data:t})}},"38b4":function(t,e,a){"use strict";a("ee40")},"3b86":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"avatar"},[t.user?r("el-tooltip",{attrs:{content:t.user.name,placement:"right",effect:"light"}},[t.user.avatar_full_url?r("img",{style:{width:t.width+"px",height:t.width+"px",borderRadius:t.borderRadius+"%",objectFit:"cover"},attrs:{src:t.user.avatar_full_url}}):r("span",{staticClass:"no-image",style:{width:t.width+"px",height:t.width+"px",fontSize:"9px",fontWeight:"bold",lineHeight:t.lineHeight+"px",borderRadius:t.borderRadius+"%",border:"0.5px solid #FFFFFF",display:"flex",justifyContent:"center",alignItems:"center",fontSize:t.fontSize+"px",background:t.arrColor[t.arrKeyword.indexOf(t.user.name.slice(0,1).toUpperCase())]}},[t._v(t._s(t.user.name.slice(0,1).toUpperCase()))])]):r("img",{staticClass:"cursor-pointer",style:{width:t.width+"px",height:t.width+"px",borderRadius:t.borderRadius+"px",objectFit:"cover"},attrs:{src:a("db37"),title:"Chưa giao"}})],1)},n=[],s=(a("a9e3"),{props:{user:{type:Object,default:function(){}},width:{type:Number,default:24},fontSize:{type:Number,default:12},lineHeight:{type:Number,default:24},borderRadius:{type:Number,default:5}},data:function(){return{arrColor:["#FF5733","#008080","#00FFFF","#2F4F4F","#FF0000","#800080","#CD5C5C","#DC143C","#8A2BE2","#A52A2A","#21618C","#556B2F","#FF1493","#DAA520","#4B0082","#191970","#C71585","#FFA500","#FF4500","#800080","#8B4513","#4169E1","#FA8072","#3498DB","#6A5ACD","#008080","#9ACD32","#2F4F4F","#228B22","rgba(68, 68, 68, 0.8)"],arrKeyword:["A","Ă","Â","B","C","D","Đ","E","Ê","G","H","I","K","L","M","N","O","Ô","Ơ","P","Q","R","S","T","U","Ư","V","X","Y",""]}}}),i=s,o=(a("c1f2"),a("2877")),l=Object(o["a"])(i,r,n,!1,null,"335fd602",null);e["a"]=l.exports},"515e":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"e",(function(){return u})),a.d(e,"c",(function(){return p})),a.d(e,"d",(function(){return m}));var r=1,n=2,s=1,i=2,o=3,l="Đúng tiến độ",c="Chậm tiến độ",d="Rủi do cao";function u(){return[{value:r,title:"Dự án nội bộ",description:"Dự án nội bộ công ty"},{value:n,title:"Dự án làm việc với khách hàng",description:"Bạn có thể thêm tài khoản khách hàng vào dự án"}]}function p(){return[{value:s,title:l},{value:i,title:c},{value:o,title:d}]}function m(t){return t===s?l:t===i?c:t===o?d:void 0}},"59f4":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{style:{background:t.bgColor},attrs:{width:t.width,height:t.width}},[a("circle",{style:{fill:t.bgColor,stroke:t.bgPercent,strokeDasharray:t.circlePercent+" 158"},attrs:{r:"25",cx:t.circleWidth,cy:t.circleWidth}})])},n=[],s=(a("a9e3"),{name:"PercentCircle",props:{width:{type:Number,default:100},percentDone:{type:Number,default:100},bgColor:{type:String,default:"#d8d8d8"},bgPercent:{type:String,default:"#39D92A"}},computed:{circleWidth:function(){var t=this.width;if(t)return t/2},circlePercent:function(){var t=this.percentDone;return t?1.58*t:0}}}),i=s,o=(a("b0ab"),a("2877")),l=Object(o["a"])(i,r,n,!1,null,"1b90acb8",null);e["a"]=l.exports},"62be":function(t,e,a){"use strict";a("7160")},6732:function(t,e,a){"use strict";a("db7d")},"6c9c":function(t,e,a){},"6dc0":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataForm",staticClass:"form-data",staticStyle:{width:"100%"},attrs:{model:t.formData,"label-position":"top","label-width":"140px",rules:t.rules,size:"small"}},[a("el-form-item",{attrs:{label:"Tên department *",prop:"name"}},[a("el-input",{attrs:{placeholder:"Nhập tên department"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"Người quản trị department",prop:"owner_ids"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Chọn người quản trị department",multiple:""},model:{value:t.formData.owner_ids,callback:function(e){t.$set(t.formData,"owner_ids",e)},expression:"formData.owner_ids"}},t._l(t.usersByAdmin,(function(t){return a("el-option",{key:"user-"+t.user_id,attrs:{label:t.name,value:t.user_id}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("ĐÓNG")]),a("el-button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:function(e){return t.handleCreateOrUpdate()}}},[t._v(t._s("create"==t.dialogStatus?"Thêm mới":"Cập nhật"))])],1)],1)},n=[],s=(a("a9e3"),a("d3b7"),a("0e8f")),i={name:"",owner_ids:[]},o={props:{formId:{type:Number,default:0},usersByAdmin:{type:Array,default:function(){return[]}}},data:function(){return{dialogStatus:"create",dialogFormVisible:!1,loading:!1,loadingBtn:!1,textMap:{update:"Chỉnh sửa department",create:"Tạo mới department"},formData:i,rules:{name:[{required:!0,message:"Chưa nhập tên department",trigger:"change"}]}}},watch:{formId:function(t,e){this.resetFormData(),t?(this.dialogStatus="update",t!=e&&this.getDepartment()):this.dialogStatus="create"}},methods:{showDialog:function(){this.dialogFormVisible=!0},hideDialog:function(){this.dialogFormVisible=!1},resetFormData:function(){this.$refs["dataForm"]&&this.$refs["dataForm"].resetFields()},showPwd:function(){var t=this.passwordType;this.passwordType="password"==t?"text":"password"},getDepartment:function(){var t=this,e=this.formId;e&&(this.loading=!0,Object(s["b"])(e).then((function(e){var a=e.data;t.formData=a})).finally((function(){t.loading=!1})))},handleCreateOrUpdate:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){t.loadingBtn=!0;var a=t.formId,r=t.formData;a?Object(s["e"])(a,r).then((function(e){var a=e.data;t.loading=!1,t.$message({type:"success",message:"Thành công"}),t.$store.dispatch("share/unshiftOrUpdateItem",{key:"departments",value:a,checkField:"department_id"}),t.hideDialog(),t.resetFormData(),t.$emit("reloadList",a)})).finally((function(){t.loadingBtn=!1})):Object(s["a"])(r).then((function(e){var a=e.data;t.loading=!1,t.$message({type:"success",message:"Thành công"}),t.$store.dispatch("share/unshiftOrUpdateItem",{key:"departments",value:a,checkField:"department_id"}),t.hideDialog(),t.resetFormData(),t.$emit("reloadList",a)})).finally((function(){t.loadingBtn=!1}))}}))}}},l=o,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,null,null);e["a"]=d.exports},"707c":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-container"},[a("div",{staticClass:"tab-container"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabMapOptions,(function(e){return a("el-tab-pane",{key:e.key,attrs:{label:e.label,name:e.key}},[a("keep-alive",["all"==e.key&&"all"==t.activeName?a("tab-project"):t._e()],1),a("keep-alive",["history"==e.key&&"history"==t.activeName?a("project-task-history"):t._e()],1)],1)})),1)],1)])},n=[],s=(a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-content"},[a("div",{staticClass:"page-header"},[a("el-row",{staticClass:"custom-filter"},[a("el-col",{attrs:{span:12}},[a("a",{staticClass:"new-task",on:{click:function(e){return t.handleClickShowDialog(null)}}},[a("el-button",{attrs:{type:"primary",size:"small",circle:""}},[a("svg-icon",{attrs:{"icon-class":"plus"}})],1),a("span",[t._v("Thêm mới dự án")])],1),a("a",{staticClass:"new-task",on:{click:function(e){return t.handleClickShowDepartmentDialog(null)}}},[a("el-button",{attrs:{type:"primary",size:"small",circle:""}},[a("svg-icon",{attrs:{"icon-class":"plus"}})],1),a("span",[t._v("Thêm mới department")])],1)]),a("el-col",{staticClass:"text-right",attrs:{span:12}},[a("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"Chọn trạng thái"},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},t._l(t.getStatusList(),(function(t){return a("el-option",{key:"status-"+t.value,attrs:{label:t.title,value:t.value}})})),1),a("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"Tất cả giai đoạn"},model:{value:t.listQuery.state,callback:function(e){t.$set(t.listQuery,"state",e)},expression:"listQuery.state"}},t._l(t.getProjectStateList(),(function(t){return a("el-option",{key:"state-"+t.value,attrs:{label:t.title,value:t.value}})})),1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{"min-width":"120px",align:"left",label:"Dự án"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",{staticClass:"info-warpper"},[a("span",{staticClass:"circle-summery"},[a("percent-circle",{attrs:{width:25,"percent-done":t.calculatePercentDone(r.task_summery),"bg-percent":t.isAllTaskDone(r.task_summery)?"#39D92A":"#FF9B25"}})],1),a("div",[a("span",{staticClass:"name"},[a("router-link",{attrs:{to:"/project/task/"+r.project_id}},[t._v(t._s(t._f("uppercaseFirst")(r.name)))])],1),r.deadline_from||r.deadline_to?a("span",{staticClass:"deadline"},[t._v(t._s(t.formatDate(r.deadline_from))+" - "+t._s(t.formatDate(r.deadline_to)))]):t._e()]),a("div",{staticClass:"update-info"},[t._v("Cập nhật "+t._s(t._f("humanizeVN")(r.updated_at)))]),a("div",{staticClass:"description"},[t._v(t._s(r.description||"Chưa có mô tả"))])])]}}])}),a("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"Department"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[a("a",{staticClass:"department"},[t._v(t._s(r.department?r.department.name:"Chưa phân loại"))])])]}}])}),a("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"Bộ phận"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",t._l(r.user_groups,(function(e){return a("a",{key:"user-group-"+e.user_group_id,staticStyle:{display:"block"},attrs:{href:"#"}},[t._v(t._s(e.name))])})),0)]}}])}),a("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"Thành viên"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",{staticClass:"list-user"},[t._l(r.members,(function(e,r){return[r<4?a("user-avatar",{key:e.user_id,attrs:{user:e,width:20,"border-radius":50}}):t._e()]})),r.members.length&&r.members.length>4?a("user-avatar",{attrs:{user:{name:(r.members.length-4).toString()},width:20,"border-radius":50}}):t._e()],2)]}}])}),a("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"Thống kê"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",[a("span",{class:t.isAllTaskDone(r.task_summery)?"text-success":"text-warning"},[t._v(t._s(r.task_summery.total_task_done)+"/"+t._s(r.task_summery.total_task))]),t._v(" hoàn thành - "),a("span",{staticClass:"text-danger"},[t._v(t._s(r.task_summery.total_task_out_date))]),t._v(" quá hạn ")]),a("div",[a("percent-slide",{attrs:{"percent-done":t.calculatePercentDone(r.task_summery),"slide-color":t.isAllTaskDone(r.task_summery)?"#39D92A":"#FF9B25"}})],1)]}}])}),a("el-table-column",{attrs:{"min-width":"100px",align:"center",label:"Giai đoạn"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",{class:"state state-"+r.state},[t._v(t._s(t.getProjectStateText(r.state)))])]}}])}),a("el-table-column",{attrs:{"min-width":"100px",align:"center",label:"Trạng thái"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",{staticClass:"status",class:r.status==t.STATUS_ACTIVE?"text-success":"text-danger"},[t._v(t._s(r.status==t.STATUS_ACTIVE?t.STATUS_ACTIVE_TITLE:t.STATUS_INACTIVE_TITLE))])]}}])})],1),a("save-form",{ref:"save_form",attrs:{"form-id":t.selectedId},on:{reloadList:t.getList}}),a("department-form",{ref:"department_form"})],1)}),i=[],o=a("24d2"),l=a("515e"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataForm",staticClass:"form-data form-project",staticStyle:{width:"100%"},attrs:{model:t.formData,"label-position":"top","label-width":"160px",rules:t.rules,size:"small"}},[a("el-form-item",{attrs:{label:"Phân loại dự án",prop:"type"}},[a("el-radio-group",{staticClass:"type",model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.getProjectTypeList(),(function(e){return a("div",{key:e.value,staticClass:"type-item"},[a("el-radio",{attrs:{label:e.value}},[t._v(" "+t._s(e.title)+" "),a("span",{staticClass:"type-description"},[t._v("("+t._s(e.description)+")")])])],1)})),0)],1),a("el-form-item",{attrs:{label:"Tên dự án *",prop:"name"}},[a("el-input",{attrs:{placeholder:"Nhập tên dự án"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"Thành viên quản trị",prop:"leader_ids"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:!0,placeholder:"Chọn người quản trị",filterable:"",clearable:""},model:{value:t.formData.leader_ids,callback:function(e){t.$set(t.formData,"leader_ids",e)},expression:"formData.leader_ids"}},t._l(t.users,(function(t){return a("el-option",{key:"user-"+t.user_id,attrs:{label:t.name,value:t.user_id}})})),1)],1),a("el-form-item",{attrs:{label:"Thành viên xử lý",prop:"member_ids"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:!0,placeholder:"Chọn thành viên xử lý",filterable:"",clearable:""},model:{value:t.formData.member_ids,callback:function(e){t.$set(t.formData,"member_ids",e)},expression:"formData.member_ids"}},t._l(t.users,(function(t){return a("el-option",{key:"user-"+t.user_id,attrs:{label:t.name,value:t.user_id}})})),1)],1),a("el-form-item",{attrs:{label:"Bộ phận",prop:"user_group_ids"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:!0,placeholder:"Chọn bộ phận",filterable:"",clearable:""},model:{value:t.formData.user_group_ids,callback:function(e){t.$set(t.formData,"user_group_ids",e)},expression:"formData.user_group_ids"}},t._l(t.userGroups,(function(t){return a("el-option",{key:"userGroup-"+t.user_group_id,attrs:{label:t.name,value:t.user_group_id}})})),1)],1),a("el-form-item",{attrs:{label:"Department",prop:"department_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Chọn department",filterable:"",clearable:""},model:{value:t.formData.department_id,callback:function(e){t.$set(t.formData,"department_id",e)},expression:"formData.department_id"}},t._l(t.departments,(function(t){return a("el-option",{key:"department-"+t.department_id,attrs:{label:t.name,value:t.department_id}})})),1)],1),a("div",{staticClass:"custom-setting"},[a("a",{staticClass:"toggle-stting",on:{click:function(e){return t.toggleSetting()}}},[a("svg-icon",{attrs:{"icon-class":"settings-gears"}}),t._v("Tùy chỉnh nâng cao ")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showSetting,expression:"showSetting"}],staticClass:"list-setting"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Ngày bắt đầu",prop:"deadline_from"}},[a("el-date-picker",{attrs:{format:"dd/MM/yyyy","value-format":"timestamp",type:"date",placeholder:"Chọn ngày bắt đầu","picker-options":t.pickerOptions},model:{value:t.formData.deadline_from,callback:function(e){t.$set(t.formData,"deadline_from",e)},expression:"formData.deadline_from"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Ngày kết thúc",prop:"deadline_to"}},[a("el-date-picker",{attrs:{format:"dd/MM/yyyy","value-format":"timestamp",type:"date",placeholder:"Chọn ngày kết thúc","picker-options":t.pickerOptions},model:{value:t.formData.deadline_to,callback:function(e){t.$set(t.formData,"deadline_to",e)},expression:"formData.deadline_to"}})],1)],1)],1),a("el-form-item",{attrs:{label:"Trạng thái hiện tại",prop:"state"}},[a("el-radio-group",{model:{value:t.formData.state,callback:function(e){t.$set(t.formData,"state",e)},expression:"formData.state"}},t._l(t.getProjectStateList(),(function(e){return a("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.title))])})),1)],1),a("el-form-item",{attrs:{label:"Mô tả dự án",prop:"description"}},[a("el-input",{attrs:{type:"textarea",placeholder:"Nhập mô tả dự án"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),a("color-list",{on:{afterSelect:t.selectColor}},[a("div",{staticClass:"el-form-item--small"},[a("label",{staticClass:"el-form-item__label"},[t._v("Màu sắc đặc trưng")])])])],1)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("ĐÓNG")]),a("el-button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:function(e){return t.handleCreateOrUpdate()}}},[t._v(t._s("create"==t.dialogStatus?"Thêm mới":"Cập nhật"))])],1)],1)},d=[],u=(a("a9e3"),a("d3b7"),a("7db0"),a("c740"),a("b0c0"),a("ab4e")),p={name:"",description:"",department_id:null,leader_ids:[],member_ids:[],user_group_ids:[],type:l["b"],deadline_from:null,deadline_to:null,task_color_id:1,state:l["a"]},m={components:{ColorList:u["a"]},props:{formId:{type:Number,default:0}},data:function(){return{showSetting:!1,dialogStatus:"create",dialogFormVisible:!1,loading:!1,loadingBtn:!1,textMap:{update:"Chỉnh sửa dự án",create:"Tạo mới dự án"},formData:p,rules:{name:[{required:!0,message:"Chưa nhập tên dự án",trigger:"change"}]}}},computed:{users:function(){return this.$store.getters.users},userGroups:function(){return this.$store.getters.user_groups},departments:function(){return this.$store.getters.departments},projects:function(){return this.$store.getters.projects},pickerOptions:function(){return{disabledDate:function(t){var e=new Date;return e.setDate(e.getDate()-1),t.getTime()<e}}}},watch:{formId:function(t,e){this.resetFormData(),t?(this.dialogStatus="update",t!=e&&this.getProject()):this.dialogStatus="create"}},methods:{getProjectTypeList:l["e"],getProjectStateList:l["c"],toggleSetting:function(){this.showSetting=!this.showSetting},showDialog:function(){this.dialogFormVisible=!0},hideDialog:function(){this.dialogFormVisible=!1},resetFormData:function(){this.$refs["dataForm"].resetFields()},showPwd:function(){var t=this.passwordType;this.passwordType="password"==t?"text":"password"},getProject:function(){var t=this,e=this.formId;e&&(this.loading=!0,Object(o["e"])(e).then((function(e){var a=e.data;t.formData=a})).finally((function(){t.loading=!1})))},selectColor:function(t){this.formData.task_color_id=t},handleCreateOrUpdate:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){t.loadingBtn=!0;var a=t.formId,r=t.formData;a?updateProject(a,r).then((function(e){var a=e.data;t.loading=!1,t.$message({type:"success",message:"Thành công"}),t.resetFormData(),t.hideDialog(),t.$emit("reloadList",a)})).finally((function(){t.loadingBtn=!1})):Object(o["c"])(r).then((function(e){var a=e.data;t.loading=!1,t.$message({type:"success",message:"Thành công"}),t.hideDialog(),t.$emit("reloadList",a),t.updateSidebar(a),t.resetFormData()})).finally((function(){t.loadingBtn=!1}))}}))},updateSidebar:function(t){var e=this.$store.getters.departments,a=e.find((function(e){return e.department_id===t.department_id}))||"",r=this.projects,n=r.findIndex((function(e){return e.department_id===(t.department_id||0)}));-1===n&&(n=0,a||(a={name:"Chưa phân loại",department_id:0,color:"#d8d8d8"}),a.projects=[],a.department_name=a.name,r.unshift({projects:[],department_name:a.name,department_id:a.department_id})),r[n].projects.unshift(t),this.$store.commit("share/SET_PROJECTS",r)}}},f=m,h=(a("831d"),a("ba0f"),a("2877")),g=Object(h["a"])(f,c,d,!1,null,"66366388",null),_=g.exports,b=a("6dc0"),v=a("a688"),y=a("59f4"),k=a("3b86"),C=a("8507"),w={name:"ProjectList",components:{saveForm:_,departmentForm:b["a"],PercentSlide:v["a"],PercentCircle:y["a"],UserAvatar:k["a"]},data:function(){return{list:null,total:0,listLoading:!0,listQuery:{page:1,limit:20,status:1,state:""},selectedId:null}},computed:{},watch:{listQuery:{handler:function(t){console.log(t),this.getList(t)},deep:!0}},mounted:function(){this.$route.query.create&&(this.$router.push(this.$route.path),this.handleClickShowDialog())},created:function(){this.getList(),this.STATUS_ACTIVE=C["a"],this.STATUS_ACTIVE_TITLE=C["b"],this.STATUS_INACTIVE_TITLE=C["c"]},methods:{getStatusList:C["d"],getProjectStateList:l["c"],getProjectStateText:l["d"],calculatePercentDone:function(t){var e=t.total_task,a=t.total_task_done;return e?a/e*100:0},isAllTaskDone:function(t){var e=t.total_task,a=t.total_task_done;return 0!==e&&a===e},getList:function(){var t=this;this.listLoading=!0,Object(o["h"])(this.listQuery).then((function(e){t.list=e.data,t.total=e.data.total,t.listLoading=!1}))},handleClickShowDialog:function(t){this.selectedId=t,this.$refs.save_form.showDialog()},handleClickShowDepartmentDialog:function(t){this.selectedId=t,this.$refs.department_form.showDialog()}}},D=w,j=(a("ddf2"),a("9c68"),Object(h["a"])(D,s,i,!1,null,"70872455",null)),x=j.exports,S=a("b4a1"),T={name:"ProjectIndex",components:{TabProject:x,ProjectTaskHistory:S["a"]},data:function(){return{tabMapOptions:[{label:"Tất cả dự án",key:"all"},{label:"Lịch sử hoạt động",key:"history"},{label:"Thảo luận",key:"discuss"},{label:"Báo cáo hệ thống",key:"report"}],activeName:"all",createdTimes:0}},watch:{activeName:function(t){this.$router.push("".concat(this.$route.path,"?tab=").concat(t))}},created:function(){var t=this.$route.query.tab;t&&(this.activeName=t)},methods:{showCreatedTimes:function(){this.createdTimes=this.createdTimes+1}}},F=T,$=Object(h["a"])(F,r,n,!1,null,null,null);e["default"]=$.exports},7160:function(t,e,a){},"7db0":function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").find,s=a("44d2"),i=a("ae40"),o="find",l=!0,c=i(o);o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},"831d":function(t,e,a){"use strict";a("85b4")},8507:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return o}));var r=1,n=0,s="Đang hoạt động",i="Đã đóng";function o(){return[{value:r,title:s},{value:n,title:i}]}},"85b4":function(t,e,a){},"8d58":function(t,e,a){},"92cd":function(t,e,a){},"9c68":function(t,e,a){"use strict";a("ec4d")},a688:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"percent-slide",style:{background:t.bgColor}},[a("span",{style:{width:t.percentDone+"%",background:t.slideColor}})])},n=[],s=(a("a9e3"),{name:"PercentSlide",props:{percentDone:{type:Number,default:0},bgColor:{type:String,default:"#E1E1E1"},slideColor:{type:String,default:"#39D92A"}}}),i=s,o=(a("38b4"),a("2877")),l=Object(o["a"])(i,r,n,!1,null,"648a1cba",null);e["a"]=l.exports},aa22:function(t,e,a){"use strict";a("d3b7");var r=a("bc3a"),n=a.n(r),s=a("5c96"),i=a("4360"),o=a("5f87"),l=n.a.create({baseURL:"https://work-api.chatbiz.io/api",timeout:6e4});l.interceptors.request.use((function(t){return i["a"].getters.token&&(t.headers["Authorization"]="Bearer ".concat(Object(o["a"])())),t}),(function(t){return Promise.reject(t)})),l.interceptors.response.use((function(t){var e=t.data;return e}),(function(t){var e=t.response.data;return Object(s["Message"])({message:e.message,type:"error",duration:3e3}),e})),e["a"]=l},ab4e:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"color-list"},[t._t("default"),t._l(t.taskColors,(function(e){return a("span",{key:e.task_color_id,staticClass:"opt",class:{active:e.task_color_id==t.activeColor},on:{click:function(a){return t.selectColor(e.task_color_id)}}},[a("span",{staticClass:"square",style:{backgroundColor:e.color}})])}))],2)},n=[],s=(a("a9e3"),{name:"ColorList",data:function(){return{activeColor:0}},props:{currentColor:{type:Number,default:0}},computed:{taskColors:function(){return this.$store.getters.task_colors}},mounted:function(){this.activeColor=this.currentColor},methods:{selectColor:function(t){this.activeColor=t,this.$emit("afterSelect",t)}},watch:{currentColor:function(){this.activeColor=this.currentColor}}}),i=s,o=(a("6732"),a("2877")),l=Object(o["a"])(i,r,n,!1,null,"7faba146",null);e["a"]=l.exports},b0ab:function(t,e,a){"use strict";a("01f4")},b4a1:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"project-history"},[a("div",{staticClass:"content-wrap"},[t._l(t.data,(function(e){return a("div",{key:e.task_activity_id,staticClass:"item",class:null==e.task.task_id?"item-delete":""},[t.id_project?t._e():a("div",{staticClass:"name-department d-flex align-items-center",on:{click:function(a){return t.showProject(e)}}},[null==e.project.color?a("span",{staticClass:"square"}):a("span",{staticClass:"square",style:{"background-color":e.project.color}}),a("span",{staticClass:"text"},[t._v(t._s(e.project.name))])]),e.task.task_id?a("div",{staticClass:"name-project d-flex align-items-center",on:{click:function(a){return t.showProjectTaskParent(e)}}},[1==e.task.is_done?a("svg-icon",{attrs:{"icon-class":"tick"}}):a("svg-icon",{attrs:{"icon-class":"tick-disable"}}),a("span",{staticClass:"text"},[t._v(t._s(e.parent.name))])],1):t._e(),a("div",{staticClass:"notification-project d-flex",on:{click:function(a){return t.showProjectTaskChild(e)}}},[a("user-avatar",{attrs:{user:e.user,"border-radius":50}}),e.user?a("div",{staticClass:"message-wrap d-flex flex-column"},[a("span",{staticClass:"message"},[a("strong",[t._v(t._s(e.user.name))]),t._v(" "),a("span",{domProps:{innerHTML:t._s(e.message)}})]),a("span",{staticClass:"time"},[a("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t._f("humanizeVN")(e.created_at)))])]):t._e()],1)])})),t.data.length>0?a("div",{staticClass:"panigation d-flex justify-content-center"},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.pagination.per_page,"current-page":t.pagination.current_page,total:t.pagination.total},on:{"current-change":t.changeCurrentPage}})],1):t._e(),0==t.data.length?a("div",{staticClass:"panigation d-flex justify-content-center"},[a("span",{staticClass:"not-data"},[t._v("Không có lịch sử nào !")])]):t._e()],2)])},n=[],s=(a("4de4"),a("aa22")),i=a("3b86"),o={name:"ProjectHistory",components:{UserAvatar:i["a"]},data:function(){return{loading:!1,id_project:"",filter:{limit:10},data:[],pagination:{total:0,count:0,per_page:0,current_page:1,total_pages:0}}},mounted:function(){this.fetchActivity();var t=this.$route.params.projectId;void 0!==t&&(this.id_project=t)},methods:{fetchActivity:function(){var t=this,e=this.$route.params.projectId,a=e,r="";r=void 0==a?"project/activity":"project/"+a+"/activity",this.loading=!0,s["a"].get(r,{params:this.filter}).then((function(e){switch(t.loading=!1,e.code){case 200:t.data=e.data.data,t.pagination.total=e.data.total,t.pagination.per_page=e.data.per_page,t.pagination.current_page=e.data.current_page;break;default:break}}))},showProject:function(t){t.task.task_id&&this.$router.push({name:"project-task",params:{projectId:t.project.project_id}})},showProjectTaskParent:function(t){var e=this;t.parent.task_id&&(this.id_project?(this.$router.push({name:"department-index"}),setTimeout((function(){e.$router.push({name:"project-task",params:{projectId:t.project.project_id},query:{task_id:t.parent.task_id}})}),150)):this.$router.push({name:"project-task",params:{projectId:t.project.project_id},query:{task_id:t.parent.task_id}}))},showProjectTaskChild:function(t){var e=this;t.task.task_id&&(this.id_project?(this.$router.push({name:"department-index"}),setTimeout((function(){e.$router.push({name:"project-task",params:{projectId:t.project.project_id},query:{task_id:t.task.task_id}})}),150)):this.$router.push({name:"project-task",params:{projectId:t.project.project_id},query:{task_id:t.task.task_id}}))},changeCurrentPage:function(t){this.filter.page=t,this.fetchActivity()}}},l=o,c=(a("fb22"),a("62be"),a("2877")),d=Object(c["a"])(l,r,n,!1,null,"338a3ca0",null);e["a"]=d.exports},ba0f:function(t,e,a){"use strict";a("6c9c")},c1f2:function(t,e,a){"use strict";a("92cd")},db37:function(t,e,a){t.exports=a.p+"static/img/no_avatar.9c80ce0c.png"},db7d:function(t,e,a){},ddf2:function(t,e,a){"use strict";a("e3a6")},e3a6:function(t,e,a){},ec4d:function(t,e,a){},ee40:function(t,e,a){},fb22:function(t,e,a){"use strict";a("8d58")}}]);