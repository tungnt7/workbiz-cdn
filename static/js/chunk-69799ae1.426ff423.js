(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69799ae1"],{"01f4":function(t,e,s){},"03e6":function(t,e,s){"use strict";s("2a12")},"0495":function(t,e,s){"use strict";s("ad32")},"0563":function(t,e,s){"use strict";s("0ec9")},"0927":function(t,e,s){t.exports=s.p+"static/img/project_list_type.5c14ac7f.png"},"0ca3":function(t,e,s){"use strict";s("f442")},"0ec9":function(t,e,s){},1699:function(t,e,s){},"176e":function(t,e,s){"use strict";s("d9a2")},2401:function(t,e,s){"use strict";s("a73e")},"268f":function(t,e,s){},"26c0":function(t,e,s){"use strict";s("d618")},"27dc":function(t,e,s){"use strict";s("268f")},"2a12":function(t,e,s){},3429:function(t,e,s){},3915:function(t,e,s){},"399d":function(t,e,s){"use strict";s("565e")},"3d70":function(t,e,s){"use strict";s("c0d4")},"3fc7":function(t,e,s){},"515e":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return i})),s.d(e,"e",(function(){return d})),s.d(e,"c",(function(){return p})),s.d(e,"d",(function(){return h}));var a=1,n=2,i=1,o=2,r=3,l="Đúng tiến độ",c="Chậm tiến độ",u="Rủi do cao";function d(){return[{value:a,title:"Dự án nội bộ",description:"Dự án nội bộ công ty"},{value:n,title:"Dự án làm việc với khách hàng",description:"Bạn có thể thêm tài khoản khách hàng vào dự án"}]}function p(){return[{value:i,title:l},{value:o,title:c},{value:r,title:u}]}function h(t){return t===i?l:t===o?c:t===r?u:void 0}},5504:function(t,e,s){},"565e":function(t,e,s){},"59f4":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{style:{background:t.bgColor},attrs:{width:t.width,height:t.width}},[s("circle",{style:{fill:t.bgColor,stroke:t.bgPercent,strokeDasharray:t.circlePercent+" 158"},attrs:{r:"25",cx:t.circleWidth,cy:t.circleWidth}})])},n=[],i=(s("a9e3"),{name:"PercentCircle",props:{width:{type:Number,default:100},percentDone:{type:Number,default:100},bgColor:{type:String,default:"#d8d8d8"},bgPercent:{type:String,default:"#39D92A"}},computed:{circleWidth:function(){var t=this.width;if(t)return t/2},circlePercent:function(){var t=this.percentDone;return t?1.58*t:0}}}),o=i,r=(s("b0ab"),s("2877")),l=Object(r["a"])(o,a,n,!1,null,"1b90acb8",null);e["a"]=l.exports},"5f67":function(t,e,s){"use strict";s("1699")},"62be":function(t,e,s){"use strict";s("7160")},6663:function(t,e,s){t.exports=s.p+"static/img/project_calendar_type.331eea72.png"},"6ab5":function(t,e,s){},7048:function(t,e,s){"use strict";s("6ab5")},7160:function(t,e,s){},"7b91":function(t,e,s){},"7eb0":function(t,e,s){},"831a":function(t,e,s){},8507:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return i})),s.d(e,"c",(function(){return o})),s.d(e,"d",(function(){return r}));var a=1,n=0,i="Đang hoạt động",o="Đã đóng";function r(){return[{value:a,title:i},{value:n,title:o}]}},"87a8":function(t,e,s){"use strict";s("ecb8")},"8d58":function(t,e,s){},"8dbc":function(t,e,s){},"8e9c":function(t,e,s){"use strict";s("7eb0")},"93f2":function(t,e,s){"use strict";s("f5b3")},"946b":function(t,e,s){},"957c7":function(t,e,s){"use strict";s("3fc7")},"967f":function(t,e,s){},"97b0":function(t,e,s){"use strict";s("967f")},"9ff3":function(t,e,s){"use strict";s("7b91")},a09b:function(t,e,s){"use strict";s("831a")},a73e:function(t,e,s){},aa22:function(t,e,s){"use strict";s("d3b7");var a=s("bc3a"),n=s.n(a),i=s("5c96"),o=s("4360"),r=s("5f87"),l=n.a.create({baseURL:"https://work-api.chatbiz.io/api",timeout:6e4});l.interceptors.request.use((function(t){return o["a"].getters.token&&(t.headers["Authorization"]="Bearer ".concat(Object(r["a"])())),t}),(function(t){return Promise.reject(t)})),l.interceptors.response.use((function(t){var e=t.data;return e}),(function(t){var e=t.response.data;return Object(i["Message"])({message:e.message,type:"error",duration:3e3}),e})),e["a"]=l},ad32:function(t,e,s){},af38:function(t,e,s){"use strict";s("5504")},b0ab:function(t,e,s){"use strict";s("01f4")},b4a1:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"project-history"},[s("div",{staticClass:"content-wrap"},[t._l(t.data,(function(e){return s("div",{key:e.task_activity_id,staticClass:"item",class:null==e.task.task_id?"item-delete":""},[t.id_project?t._e():s("div",{staticClass:"name-department d-flex align-items-center",on:{click:function(s){return t.showProject(e)}}},[null==e.project.color?s("span",{staticClass:"square"}):s("span",{staticClass:"square",style:{"background-color":e.project.color}}),s("span",{staticClass:"text"},[t._v(t._s(e.project.name))])]),e.task.task_id?s("div",{staticClass:"name-project d-flex align-items-center",on:{click:function(s){return t.showProjectTaskParent(e)}}},[1==e.task.is_done?s("svg-icon",{attrs:{"icon-class":"tick"}}):s("svg-icon",{attrs:{"icon-class":"tick-disable"}}),s("span",{staticClass:"text"},[t._v(t._s(e.parent.name))])],1):t._e(),s("div",{staticClass:"notification-project d-flex",on:{click:function(s){return t.showProjectTaskChild(e)}}},[s("user-avatar",{attrs:{user:e.user,"border-radius":50}}),e.user?s("div",{staticClass:"message-wrap d-flex flex-column"},[s("span",{staticClass:"message"},[s("strong",[t._v(t._s(e.user.name))]),t._v(" "),s("span",{domProps:{innerHTML:t._s(e.message)}})]),s("span",{staticClass:"time"},[s("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t._f("humanizeVN")(e.created_at)))])]):t._e()],1)])})),t.data.length>0?s("div",{staticClass:"panigation d-flex justify-content-center"},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.pagination.per_page,"current-page":t.pagination.current_page,total:t.pagination.total},on:{"current-change":t.changeCurrentPage}})],1):t._e(),0==t.data.length?s("div",{staticClass:"panigation d-flex justify-content-center"},[s("span",{staticClass:"not-data"},[t._v("Không có lịch sử nào !")])]):t._e()],2)])},n=[],i=(s("4de4"),s("aa22")),o=s("3b86"),r={name:"ProjectHistory",components:{UserAvatar:o["a"]},data:function(){return{loading:!1,id_project:"",filter:{limit:10},data:[],pagination:{total:0,count:0,per_page:0,current_page:1,total_pages:0}}},mounted:function(){this.fetchActivity();var t=this.$route.params.projectId;void 0!==t&&(this.id_project=t)},methods:{fetchActivity:function(){var t=this,e=this.$route.params.projectId,s=e,a="";a=void 0==s?"project/activity":"project/"+s+"/activity",this.loading=!0,i["a"].get(a,{params:this.filter}).then((function(e){switch(t.loading=!1,e.code){case 200:t.data=e.data.data,t.pagination.total=e.data.total,t.pagination.per_page=e.data.per_page,t.pagination.current_page=e.data.current_page;break;default:break}}))},showProject:function(t){t.task.task_id&&this.$router.push({name:"project-task",params:{projectId:t.project.project_id}})},showProjectTaskParent:function(t){var e=this;t.parent.task_id&&(this.id_project?(this.$router.push({name:"department-index"}),setTimeout((function(){e.$router.push({name:"project-task",params:{projectId:t.project.project_id},query:{task_id:t.parent.task_id}})}),150)):this.$router.push({name:"project-task",params:{projectId:t.project.project_id},query:{task_id:t.parent.task_id}}))},showProjectTaskChild:function(t){var e=this;t.task.task_id&&(this.id_project?(this.$router.push({name:"department-index"}),setTimeout((function(){e.$router.push({name:"project-task",params:{projectId:t.project.project_id},query:{task_id:t.task.task_id}})}),150)):this.$router.push({name:"project-task",params:{projectId:t.project.project_id},query:{task_id:t.task.task_id}}))},changeCurrentPage:function(t){this.filter.page=t,this.fetchActivity()}}},l=r,c=(s("fb22"),s("62be"),s("2877")),u=Object(c["a"])(l,a,n,!1,null,"338a3ca0",null);e["a"]=u.exports},bd26:function(t,e,s){"use strict";s("3429")},c0d4:function(t,e,s){},cff0:function(t,e,s){"use strict";s("946b")},d618:function(t,e,s){},d9a2:function(t,e,s){},deb3:function(t,e,s){"use strict";s("fb4b")},ecb8:function(t,e,s){},ee2e:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return n})),s.d(e,"c",(function(){return i}));var a="PROJECT_REPORT",n="USER_CREATE",i="USER_EDIT"},ee99:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC1SURBVHgBlZHLEcIgEIb/JRTheAk5JTPagC2kClODBXi3icQyrMAGfBy8cLMJh1UkOIDhkO/AsO9/gfCBL80WbBQ8xJrWjwETyDGhB1HgJiwODBLoA5d+7qgSyEFQkc3OzhdkkNnICwPLaIJ2g+39WnOavxFFF+0A6HN9q1wPpi59JaBQSQ/1k7Q83fd+KVcAXbarIyYQo764W2r/FcxAeAmRN7UDvjvYH0wDZdsoNqEAo+35BkiGMCrPH0bIAAAAAElFTkSuQmCC"},f442:function(t,e,s){},f556:function(t,e,s){"use strict";s("3915")},f5b3:function(t,e,s){},fb22:function(t,e,s){"use strict";s("8d58")},fb4b:function(t,e,s){},fb4d:function(t,e,s){"use strict";s("8dbc")},fcb4:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-container"},[a("el-row",{staticClass:"flex-custom"},[a("el-col",{attrs:{span:t.selectedId?6:t.isShowRightBar?18:24}},[t.project&&!t.selectedId?a("div",{staticClass:"header project"},[a("div",{staticClass:"info"},[a("avatar",{attrs:{content:t.project.name}}),a("div",{staticClass:"project--name",style:t.is_edit?"--width:30%":"--width: auto"},[t.is_edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},nativeOn:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateProjectName(e)},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.is_edit=!t.is_edit}]},model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-check"},on:{click:function(e){return e.stopPropagation(),t.updateProjectName(e)}},slot:"append"})],1)]:a("a",{on:{click:function(e){t.is_edit=!0}}},[t._v(t._s(t.project.name))])],2),a("state",{attrs:{phase:t.project.state}})],1),a("div",{staticClass:"action"},[t.isAllowDelete?a("div",{staticClass:"wb-remove",attrs:{title:"Xóa dự án"},on:{click:t.projectRemove}},[a("i",{staticClass:"far fa-trash-alt"})]):t._e()])]):t._e(),a("div",{staticClass:"tab-container"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{class:"trello"==t.showType?"wb-trello-overflow ":"",attrs:{name:"task"}},[a("span",{attrs:{slot:"label"},slot:"label"},["list"===t.showType?a("img",{staticStyle:{transform:"translateY(5px)"},attrs:{src:s("0927"),width:"20px"}}):t._e(),"trello"===t.showType?a("img",{staticStyle:{transform:"translateY(2px)"},attrs:{src:s("ee99"),width:"14px"}}):t._e(),"calendar"===t.showType?a("img",{staticStyle:{transform:"translateY(2px)"},attrs:{src:s("6663"),width:"14px"}}):t._e(),a("el-dropdown",{attrs:{placement:"bottom"},on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v(" Công việc "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{class:t.appendActiveTypeInTaskTab("list"),attrs:{command:"list"}},[t._v(" Xem dạng danh sách")]),a("el-dropdown-item",{class:t.appendActiveTypeInTaskTab("trello"),attrs:{command:"trello"}},[t._v(" Xem dạng bảng")]),a("el-dropdown-item",{class:t.appendActiveTypeInTaskTab("calendar"),attrs:{command:"calendar"}},[t._v(" Xem dạng calendar")])],1)],1)],1),a("keep-alive",["list"===t.showType?a("tab-task-list"):t._e(),"trello"===t.showType?a("project-task-trello",{ref:"Tasktrello"}):t._e(),"calendar"===t.showType?a("project-task-calendar"):t._e()],1)],1),a("el-tab-pane",{attrs:{label:"Lịch sử hoạt động",name:"history",lazy:!0}},[a("keep-alive",[a("project-task-history")],1)],1),t.isPermission(t.project_report)?a("el-tab-pane",{attrs:{label:"Báo cáo",name:"report",lazy:!0}},[a("keep-alive",[a("project-task-report")],1)],1):t._e(),a("el-tab-pane",{attrs:{label:"Tùy chỉnh",name:"setting",lazy:!0}},[a("keep-alive",[a("div",{staticStyle:{margin:"20px"}},[t._v("This is Setting Tab")])])],1)],1)],1)]),a("el-col",{directives:[{name:"show",rawName:"v-show",value:t.selectedId,expression:"selectedId"}],staticClass:"detail-wrapper custom-scroll",attrs:{span:12}},[a("a",{staticClass:"close-detail",on:{click:t.closeDetail}},[a("svg-icon",{attrs:{"icon-class":"plus"}})],1),t.selectedId?a("task-detail",{attrs:{"task-id":t.selectedId}}):t._e()],1),t.isShowRightBar?a("el-col",{staticClass:"custom-scroll",attrs:{span:6}},[a("right-bar",{attrs:{"percen-task-done":t.percenTaskDone,"project-of-me":!!t.selectedId}})],1):t._e()],1)],1)},n=[],i=(s("07ac"),s("4de4"),s("99af"),s("b0c0"),s("c740"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-page"},[s("el-row",[s("el-col",{staticClass:"custom-scroll left-side",attrs:{span:24}},[s("div",{staticClass:"task-page-content"},[t.selectedId?t._e():s("div",{staticClass:"page-header"},[s("el-row",{staticClass:"custom-filter"},[s("el-col",{attrs:{span:10}},[s("div",{staticClass:"action"},[s("a",{staticClass:"new-task",on:{click:function(e){return t.handleClickShowDialog(null)}}},[s("el-button",{attrs:{type:"primary",size:"small",circle:""}},[s("svg-icon",{attrs:{"icon-class":"plus"}})],1),s("span",[t._v("Tạo mới công việc")])],1),t._v("hoặc "),s("a",{staticClass:"new-task",on:{click:function(e){return t.handleClickShowDialog("project")}}},[t._v("Tạo nhóm công việc")])])]),s("el-col",{staticClass:"text-right",attrs:{span:14}},[s("el-select",{staticStyle:{"margin-left":"10px","max-width":"160px","min-width":"100px"},attrs:{clearable:"",placeholder:"Người xử lý"},on:{change:t.getList},model:{value:t.listQuery.assignee_id,callback:function(e){t.$set(t.listQuery,"assignee_id",e)},expression:"listQuery.assignee_id"}},[s("el-option",{attrs:{label:"Chưa gán",value:"-1"}}),t._l(t.current_project_users,(function(t){return s("el-option",{key:"user-"+t.user_id,attrs:{label:t.name,value:t.user_id}})}))],2),s("el-select",{staticStyle:{"margin-left":"10px","max-width":"160px","min-width":"100px"},attrs:{clearable:"",placeholder:"Tất cả trạng thái"},on:{change:t.getList},model:{value:t.listQuery.state,callback:function(e){t.$set(t.listQuery,"state",e)},expression:"listQuery.state"}},t._l(t.getFilterStateList(),(function(t){return s("el-option",{key:"state-"+t.value,attrs:{label:t.title,value:t.value}})})),1)],1)],1)],1),s("div",{staticClass:"page-content"},[s("div",{staticClass:"task-list custom-scroll"},[t.selectedId?s("div",{staticClass:"search-box"},[s("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Tìm kiếm công việc",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getList(e)}},model:{value:t.listQuery.search_keyword,callback:function(e){t.$set(t.listQuery,"search_keyword",e)},expression:"listQuery.search_keyword"}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1):t._e(),s("div",{staticClass:"task-group-wrapper"},t._l(t.taskByGroups,(function(e){return s("div",{key:e.task_group_id,staticClass:"task-group-item"},[s("el-collapse",{attrs:{value:["1"]}},[s("el-collapse-item",{attrs:{name:"1",disabled:t.disabled}},[s("template",{slot:"title"},[s("span",{staticClass:"task-group-item__title title",staticStyle:{width:"85%"}},[s("span",{staticClass:"text-overflow",style:"--maxWidth: "+(t.selectedId?"300px":"95%")},[t._v(t._s(e.name))]),s("circle-number",{attrs:{color:e.color,content:parseInt(e.point||0)}})],1),s("span",{staticClass:"action"},[s("span",{staticClass:"add"},[s("span",{on:{click:function(s){return t.handleCreateTaskInGroup(e.task_group_id)}}},[s("svg-icon",{attrs:{"icon-class":"add"}}),t._v(" "),t.selectedId?t._e():s("span",[t._v("Thêm công việc")])],1),e.task_group_id>0?s("span",{staticClass:"ml-5",on:{click:function(s){return t.deleteGroupTask(e)}}},[s("i",{staticClass:"fa fa-trash-alt"}),t._v(" "),t.selectedId?t._e():s("span",[t._v("Xóa nhóm")])]):t._e()])])]),s("div",{staticClass:"task-group-content"},t._l(e.tasks,(function(e){return s("task-item",{key:e.task_id,class:{active:e.task_id==t.selectedId},attrs:{task:e,"show-action":!t.selectedId},on:{reloadList:t.getList}})})),1)],2)],1)],1)})),0)]),s("save-form",{ref:"save_form",attrs:{"project-id":t.selectedProjectId,"task-group-id":t.selectedTaskGroupId},on:{"update:projectId":function(e){t.selectedProjectId=e},"update:project-id":function(e){t.selectedProjectId=e},reloadList:t.getList}}),s("task-group-form",{ref:"task_group_form",on:{afterCreate:t.pushTaskGroupToList}})],1)])])],1)],1)}),o=[],r=(s("7db0"),s("8266")),l=s("8fe3"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:"Thêm nhóm mới",visible:t.dialogFormVisible,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("el-form",{ref:"dataForm",staticClass:"form-data form-project",staticStyle:{width:"100%"},attrs:{model:t.modelData,"label-position":"top","label-width":"160px",rules:t.rules,size:"small"}},[s("el-form-item",{attrs:{label:"Tên nhóm",prop:"name"}},[s("el-input",{attrs:{placeholder:"Nhập tên nhóm"},model:{value:t.modelData.name,callback:function(e){t.$set(t.modelData,"name",e)},expression:"modelData.name"}})],1),s("el-form-item",{attrs:{label:"Điểm",prop:"point"}},[s("el-input",{attrs:{type:"age",placeholder:"Nhập điểm (còn lại "+t.point+" điểm)"},model:{value:t.modelData.point,callback:function(e){t.$set(t.modelData,"point",e)},expression:"modelData.point"}})],1),s("color-list",{on:{afterSelect:t.selectColor}},[s("div",{staticClass:"el-form-item--small"},[s("label",{staticClass:"el-form-item__label"},[t._v("Màu sắc")])])])],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("ĐÓNG")]),s("el-button",{attrs:{type:"primary",size:"small",disable:!t.canSubmit,loading:!t.canSubmit},on:{click:function(e){return t.submitForm()}}},[t._v("Thêm mới")])],1)],1)},u=[],d=(s("a9e3"),s("aa22")),p=s("ab4e"),h={name:"TaskGroupForm",components:{ColorList:p["a"]},props:{totalPointAvaiable:{type:Number,default:0}},data:function(){return{canSubmit:!0,dialogFormVisible:!1,modelData:{name:"",point:"",task_color_id:"",project_id:""},point:10,rules:{name:[{required:!0,message:"Vui lòng nhập tên nhóm"},{min:2,max:191,message:"Tên nhóm có chiều dài từ 2 tới 191 kí tự"}]}}},watch:{totalPointAvaiable:function(){this.point=this.totalPointAvaiable}},mounted:function(){this.modelData.project_id=this.$route.params.projectId,this.point=this.totalPointAvaiable},methods:{showDialog:function(){this.dialogFormVisible=!0},hideDialog:function(){this.dialogFormVisible=!1},resetFormData:function(){this.$refs["dataForm"].resetFields()},selectColor:function(t){this.modelData.task_color_id=t},submitForm:function(){var t=this;this.$refs["dataForm"].validate((function(e){e&&t.storeModel()}))},storeModel:function(){var t=this;this.canSubmit=!1,d["a"].post("task-group",this.modelData).then((function(e){switch(t.canSubmit=!0,e.code){case 200:t.$notify({title:"Thành công",message:"Thêm mới thành công",type:"success"}),t.resetFormData(),t.hideDialog();var s=e.data;t.$emit("afterCreate",s);break;default:break}}))}}},m=h,_=s("2877"),f=Object(_["a"])(m,c,u,!1,null,"c680b900",null),g=f.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon-svg"},[s("svg",{attrs:{width:t.width,height:t.height,viewBox:"0 0 26 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M7.99405 17.0861L-5.72205e-06 10L7.99405 2.91386C8.26996 2.63927 9.0099 2.03003 9.0099 2.03003C10.6881 0.756436 12.7802 0 15.0495 0C20.5723 0 25.0495 4.47723 25.0495 10C25.0495 15.5228 20.5723 20 15.0495 20C12.7802 20 10.6881 19.2436 9.0099 17.97V17.9868C9.0099 17.9868 8.26996 17.3607 7.99405 17.0861Z",fill:t.color}}),s("path",{attrs:{d:"M15.0495 19.3566C9.89117 19.3566 5.70954 15.175 5.70954 10.0167C5.70954 4.85839 9.89117 0.676758 15.0495 0.676758C20.2078 0.676758 24.3894 4.85839 24.3894 10.0167C24.3894 15.175 20.2078 19.3566 15.0495 19.3566Z",fill:"#ffff"}})]),s("span",{staticClass:"icon-svg__content",style:"color: "+t.color,domProps:{textContent:t._s(t.getContent)}})])},k=[],C={props:{color:{type:String,default:"#F52121"},width:{type:Number,default:26},height:{type:Number,default:20},content:{type:Number,default:0}},computed:{getContent:function(){return this.content>9?this.content:"0"+this.content}}},b=C,y=(s("8e9c"),Object(_["a"])(b,v,k,!1,null,null,null)),w=y.exports,x=s("cc1d"),T=s("8507"),j={name:"TaskList",components:{saveForm:r["a"],taskItem:l["a"],TaskGroupForm:g,CircleNumber:w},data:function(){return{total:0,listLoading:!0,activeTab:x["p"],projectIdToCreateTask:0,listQuery:{page:1,limit:1e3,search_keyword:"",status:1,state:"",user_group_id:"",assign_type:"",assignee_id:""},taskGroupsClone:[],selectedTaskGroupId:null,disabled:!1,isShowProject:!1}},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}},percenTaskDone:function(){return 50},current_project_id:function(){return this.$store.getters.current_project_id},tasks:{get:function(){return this.$store.getters.tasks},set:function(t){this.$store.dispatch("task/setTasks",t)}},selectedId:{get:function(){return this.$store.getters.selectedTaskId},set:function(t){this.$store.dispatch("task/setSelectedTask",t)}},current_project_users:function(){return this.$store.getters.current_project_users},selectedProjectId:{set:function(t){this.$store.dispatch("project/setSelectedProjectId",t)},get:function(){return this.$store.getters.selectedProjectId}},taskByGroups:{get:function(){return this.$store.getters["taskGroup/list"]},set:function(t){this.$store.commit("taskGroup/SET_TASK_GROUPS",t)}}},watch:{selectedId:function(t){this.$router.push({name:"project-task",query:{task_id:t}})},$route:function(t,e){this.handleLoadTaskInRoute()}},created:function(){this.STATUS_ACTIVE=T["a"],this.STATUS_ACTIVE_TITLE=T["b"],this.STATUS_INACTIVE_TITLE=T["c"],this.TAB_TASK=x["p"],this.TAB_STAFF=x["o"],this.TAB_FOLLOW=x["m"],this.TAB_LOOP=x["n"],this.handleLoadTaskInRoute()},beforeDestroy:function(){this.selectedProjectId=null,this.selectedTaskId=null,this.$store.commit("task/SET_SELECTED_TASK",null),this.$store.commit("task/SET_SELECTED_TASK_ID",null)},methods:{getStatusList:T["d"],getStateList:x["t"],getFilterStateList:x["q"],handleToggleTaskGroup:function(t){var e=this.taskByGroups,s=e.find((function(e){return e.task_group_id===t}));s.is_open=!s.is_open,e["index"]=s,this.taskByGroups=e,this.taskGroupsClone=e},pushTaskGroupToList:function(t){t.tasks=[],this.taskByGroups.push(t)},handleLoadTaskInRoute:function(){var t=this.$route.query.task_id,e=this.$route.params.projectId;if(t){var s=t?parseInt(t):null;this.selectedId=s}else this.selectedId=null;e&&(this.selectedProjectId=parseInt(e),this.getList())},closeDetail:function(){this.selectedId=null,this.$router.push({name:"project-task"})},changeTab:function(t){this.activeTab=t},getList:function(){var t=this.listQuery,e=this.$route.params.projectId;e&&this.$store.dispatch("taskGroup/fetchTaskGroupsByProjectId",{projectId:e,params:t})},disableCollapse:function(){var t=this;this.disabled=!0,setTimeout((function(){t.disabled=!1}),500)},handleClickShowDialog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.disableCollapse(),"project"===t)return this.$refs.task_group_form.showDialog();this.$refs.save_form.showDialog()},handleCreateTaskInGroup:function(t){this.selectedTaskGroupId=t,this.handleClickShowDialog()},deleteGroupTask:function(t){var e=this;console.log(t),this.$confirm("Xác nhận xóa nhóm: "+t.name,"Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Đóng",type:"warning"}).then((function(){d["a"].delete("task-group/"+t.task_group_id).then((function(s){e.taskByGroups=e.taskByGroups.filter((function(e){return e.task_group_id!==t.task_group_id}))}))})).catch((function(){}))}}},D=j,S=(s("26c0"),s("9ff3"),Object(_["a"])(D,i,o,!1,null,"55802784",null)),$=S.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"project-report"},[t._m(0),s("task-group"),s("section",{staticClass:"project-options"},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:6}},[s("time-down",{on:{change:t.changeDate}})],1),s("el-col",{attrs:{span:6}},[s("drop-down",{attrs:{items:t.byTime},on:{change:t.changeTime}})],1),s("el-col",{attrs:{span:6}},[s("drop-down",{attrs:{label:t.report.department?t.report.department.name:"Chưa phân loại",active:!1}})],1),s("el-col",{attrs:{span:6}},[s("drop-down",{attrs:{items:t.byType},on:{change:t.changeType}})],1)],1)],1),s("section",{staticClass:"project-global"},[s("div",{staticClass:"item d-flex flex-column"},[s("span",{staticClass:"title"},[t._v("Công việc")]),s("div",{staticClass:"d-flex flex-row"},[s("div",{staticClass:"d-flex flex-column"},[s("span",{staticClass:"count-main"},[t._v(t._s(t.reportCount?t.reportCount.total_tasks:0))])]),s("div",{staticClass:"content-main"},[s("div",{staticClass:"item-sub d-flex align-items-center"},[s("span",{staticClass:"circle color-1"}),s("span",{staticClass:"count-sub text"},[t._v(t._s(t.doing))]),s("span",{staticClass:"title-sub text"},[t._v("Đang thực hiện")])]),s("div",{staticClass:"item-sub d-flex align-items-center"},[s("span",{staticClass:"circle color-2"}),s("span",{staticClass:"count-sub text"},[t._v(t._s(t.done))]),s("span",{staticClass:"title-sub text"},[t._v("Hoàn thành")])])])])]),s("div",{staticClass:"item d-flex flex-column"},[s("span",{staticClass:"title"},[t._v("Mục tiêu")]),s("div",{staticClass:"d-flex flex-row"},[s("div",{staticClass:"d-flex flex-column"},[s("span",{staticClass:"count-main"},[t._v(t._s(t.target_doing+t.target_done))])]),s("div",{staticClass:"content-main"},[s("div",{staticClass:"item-sub d-flex align-items-center"},[s("span",{staticClass:"circle color-1"}),s("span",{staticClass:"count-sub text"},[t._v(t._s(t.target_doing))]),s("span",{staticClass:"title-sub text"},[t._v("đang thực hiện")])]),s("div",{staticClass:"item-sub d-flex align-items-center"},[s("span",{staticClass:"circle color-2"}),s("span",{staticClass:"count-sub text"},[t._v(t._s(t.target_done))]),s("span",{staticClass:"title-sub text"},[t._v("hoàn thành")])])])])]),s("div",{staticClass:"item d-flex flex-column"},[s("span",{staticClass:"title"},[t._v("Thành viên")]),s("div",{staticClass:"d-flex flex-row"},[s("div",{staticClass:"d-flex flex-column"},[s("span",{staticClass:"count-main"},[t._v(t._s(t.reportCount.members?t.reportCount.members.total:0))])]),s("div",{staticClass:"content-main"},[s("div",{staticClass:"item-sub d-flex align-items-center"},[s("span",{staticClass:"circle color-1"}),s("span",{staticClass:"count-sub text"},[t._v(t._s(t.reportCount.members?t.reportCount.members.staffs:0))]),s("span",{staticClass:"title-sub text"},[t._v("nhân viên")])]),s("div",{staticClass:"item-sub d-flex align-items-center"},[s("span",{staticClass:"circle color-2"}),s("span",{staticClass:"count-sub text"},[t._v(t._s(t.reportCount.members?t.reportCount.members.customers:0))]),s("span",{staticClass:"title-sub text"},[t._v("TK khách")])])])])]),s("div",{staticClass:"item d-flex flex-column"},[s("span",{staticClass:"title"},[t._v("Workloads")]),s("div",{staticClass:"d-flex flex-row"},[s("div",{staticClass:"d-flex flex-column"},[s("span",{staticClass:"count-main"},[t._v(t._s(t.result+t.result_empty))]),s("span",{staticClass:"date-main"})]),s("div",{staticClass:"content-main"},[s("div",{staticClass:"item-sub d-flex align-items-center"},[s("span",{staticClass:"circle color-1"}),s("span",{staticClass:"count-sub text"},[t._v(t._s(t.result))]),s("span",{staticClass:"title-sub text"},[t._v("Công việc đã báo cáo")])]),s("div",{staticClass:"item-sub d-flex align-items-center"},[s("span",{staticClass:"circle color-2"}),s("span",{staticClass:"count-sub text"},[t._v(t._s(t.result_empty))]),s("span",{staticClass:"title-sub text"},[t._v("Công việc chưa báo cáo")])])])])]),s("div",{staticClass:"item d-flex flex-column"},[s("span",{staticClass:"title"},[t._v("Thời gian")]),s("div",{staticClass:"d-flex flex-row"},[s("div",{staticClass:"content-main"},[s("div",{staticClass:"item-sub d-flex align-items-center"},[s("span",{staticClass:"circle color-1"}),s("span",{staticClass:"count-sub text"},[t._v(t._s(t.worked_time_str))]),s("span",{staticClass:"title-sub text"})]),t._m(1)])])])]),s("section",{staticClass:"project-work"},[s("span",{staticClass:"header-section"},[t._v("Báo cáo công việc")]),s("div",[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Báo cáo trạng thái công việc")]),s("div",{staticClass:"content project-work-item-1"},[s("pie-chart",{attrs:{"chart-data":t.report.task_summery}})],1)])]),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Thành viên xuất sắc")]),s("div",{staticClass:"content project-work-item-2"},[t.reportUser.best&&t.reportUser.best.length>0?t._l(t.reportUser.best,(function(e){return s("div",{key:e.id,staticClass:"element d-flex justify-content-between"},[s("div",{staticClass:"d-flex flex-row"},[s("AvatarTooltip",{attrs:{name:e.user.name}}),s("div",{staticClass:"info d-flex flex-column"},[s("span",{staticClass:"name"},[t._v(t._s(e.user.name))]),s("span",{staticClass:"text"},[s("span",{staticClass:"strong"},[t._v(t._s(e.total_tasks_done))]),t._v("/"+t._s(e.total_tasks)+" công việc đã hoàn thành")])])],1),s("div",{staticClass:"process"},[s("progress-bar",{attrs:{val:e.percent_tasks_only_done,size:11,"bg-color":"#E3F3FF","bar-color":"#4AA0E9",text:e.percent_tasks_only_done+"%","font-size":8,"text-position":"inside","text-fg-color":"#fff"}})],1)])})):t._e(),!t.reportUser.best||t.reportUser.best&&0==t.reportUser.best.length?s("div",[s("span",{staticClass:"not-found"},[t._v("Không có thành viên xuất sắc !")])]):t._e()],2)])]),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Công việc không đúng hạn")]),s("div",{staticClass:"content project-work-item-3"},[s("div",{staticClass:"element element-1 d-flex align-items-center"},[s("el-progress",{attrs:{width:50,"stroke-linecap":"square","stroke-width":4,"show-text":!1,type:"circle",percentage:t.calculatePercentOutDate(t.report.task_summery),color:[{color:"#F52121",percentage:100}]}}),s("div",{staticClass:"info d-flex flex-column"},[s("span",[s("span",{staticClass:"count",staticStyle:{color:"#F52121"}},[t._v(t._s(t.report.task_summery.total_task_out_date))]),s("span",{staticClass:"text"},[t._v("Công việc quá hạn")])]),s("span",{staticClass:"sub-text"},[t._v("trên "+t._s(t.report.task_summery.total_task)+" công việc đang thực hiện")])])],1),s("div",{staticClass:"element d-flex align-items-center"},[s("el-progress",{attrs:{width:50,"stroke-linecap":"square","stroke-width":4,"show-text":!1,type:"circle",percentage:t.calculatePercentDoneLate(t.report.task_summery),color:[{color:"#FF9B25",percentage:100}]}}),s("div",{staticClass:"info d-flex flex-column"},[s("span",[s("span",{staticClass:"count",staticStyle:{color:"#FF9B25"}},[t._v(t._s(t.report.task_summery.total_task_done_late))]),s("span",{staticClass:"text"},[t._v("Công việc hoàn thành muộn")])]),s("span",{staticClass:"sub-text"},[t._v("trên "+t._s(t.report.task_summery.total_task)+" công việc đang thực hiện")])])],1)])])])],1)],1)]),s("section",{staticClass:"project-doughnut"},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Quá trình hoàn thành theo ngày")]),s("div",{staticClass:"content"},[s("stack-chart",{attrs:{"chart-data":t.dayAndWeeks.days}})],1)])]),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Tổng hợp theo tuần")]),s("div",{staticClass:"content"},[s("stack-chart",{attrs:{"chart-data":t.dayAndWeeks.weeks}})],1)])])],1)],1),s("section",{staticClass:"project-user"},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:14}},[s("div",{staticClass:"item"},[s("div",{staticClass:"title d-flex justify-content-between align-items-center"},[s("span",[t._v("Báo cáo chi tiết thành viên")]),s("span",{staticClass:"excel"},[s("i",{staticClass:"el-icon-download"}),t._v(" Xuất báo cáo Excel")])]),s("div",{staticClass:"content table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.reportUser.all}},[s("el-table-column",{attrs:{"min-width":"150",align:"left","header-align":"left","label-class-name":"bbb",label:"Thành viên"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"d-flex align-items-center"},[-1===e.row.id?s("span",{staticClass:"avatar-not-assignment"}):s("AvatarTooltip",{attrs:{name:e.row.user.name}}),s("span",{staticClass:"name value",style:-1==e.row.id?"font-weight: bold":""},[t._v(t._s(e.row.user.name))])],1)]}}])}),s("el-table-column",{attrs:{width:"100",align:"center",label:"Thời gian làm việc (h)"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"house value"},[t._v(t._s(e.row.total_worked_time||0))])]}}])}),s("el-table-column",{attrs:{width:"100",align:"center",label:"Chờ xác nhận"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"value"},[t._v(t._s(e.row.total_tasks_confirm||0))])]}}])}),s("el-table-column",{attrs:{width:"100",align:"center",label:"Chưa bắt đầu"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"value"},[t._v(t._s(e.row.total_tasks_todo))])]}}])}),s("el-table-column",{attrs:{width:"70",align:"center",label:"Đang làm"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"value",staticStyle:{color:"#198CFF"}},[t._v(t._s(e.row.total_tasks_doing))])]}}])}),s("el-table-column",{attrs:{width:"70",align:"center",label:"Hoàn thành"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"value",staticStyle:{color:"#39D92A"}},[t._v(t._s(e.row.total_tasks_done))])]}}])}),s("el-table-column",{attrs:{width:"70",align:"center",label:"Chờ review"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"value",staticStyle:{color:"#FFD527"}},[t._v(t._s(e.row.total_tasks_review))])]}}])}),s("el-table-column",{attrs:{width:"100",align:"center",label:"Hoàn thành muộn"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"value",staticStyle:{color:"#FF9B25"}},[t._v(t._s(e.row.total_tasks_done_late))])]}}])}),s("el-table-column",{attrs:{width:"70",align:"center",label:"Quá hạn"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"value",staticStyle:{color:"#F52121"}},[t._v(t._s(e.row.total_tasks_out_date||0))])]}}])})],1)],1)])]),s("el-col",{attrs:{span:5}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Còn nhiều việc nhất")]),s("div",{staticClass:"content project-work-item-2"},[t.reportUser.bad&&t.reportUser.bad.length>0?t._l(t.reportUser.bad,(function(e){return s("div",{key:e.id,staticClass:"element"},[s("div",{staticClass:"d-flex flex-row"},[s("AvatarTooltip",{attrs:{name:e.user.name}}),s("div",{staticClass:"info d-flex flex-column"},[s("span",{staticClass:"name"},[t._v(t._s(e.user.name))]),s("span",{staticClass:"text"},[s("span",{staticClass:"strong"},[t._v(t._s(e.total_tasks_todo+e.total_tasks_doing+e.total_tasks_review+e.total_tasks_out_date))]),t._v("/"+t._s(e.total_tasks)+" công việc đang thực hiện")])])],1)])})):t._e(),!t.reportUser.bad||t.reportUser.bad&&0==t.reportUser.bad.length?s("div",[s("span",{staticClass:"not-found"},[t._v("Không có thành viên còn nhiều việc !")])]):t._e()],2)])]),s("el-col",{attrs:{span:5}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Làm muộn nhiều nhất")]),s("div",{staticClass:"content project-work-item-2"},[t.reportUser.doneLate&&t.reportUser.doneLate.length>0?t._l(t.reportUser.doneLate,(function(e){return s("div",{key:e.id,staticClass:"element"},[s("div",{staticClass:"d-flex flex-row"},[s("AvatarTooltip",{attrs:{name:e.user.name}}),s("div",{staticClass:"info d-flex flex-column"},[s("span",{staticClass:"name"},[t._v(t._s(e.user.name))]),s("span",{staticClass:"text"},[s("span",{staticClass:"strong"},[t._v(t._s(e.total_tasks_out_date))]),t._v(" quá hạn | "),s("span",{staticClass:"strong"},[t._v(t._s(e.total_tasks_done_late))]),t._v(" hoàn thành muộn")])])],1)])})):t._e(),!t.reportUser.doneLate||t.reportUser.doneLate&&0==t.reportUser.doneLate.length?s("div",[s("span",{staticClass:"not-found"},[t._v("Không có thành viên làm muộn nhiều !")])]):t._e()],2)])])],1)],1),s("section",{staticClass:"project-target common-wrap"},[s("span",{staticClass:"header-section"},[t._v("Báo cáo theo danh sách mục tiêu")]),s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:19}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Danh sách mục tiêu")]),s("div",{staticClass:"content table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.reportTargets,border:""}},[s("el-table-column",{attrs:{align:"left","header-align":"left","label-class-name":"bbb",label:"Mục tiêu"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"d-flex align-items-center"},[s("div",{staticStyle:{"margin-top":"5px","margin-right":"3px"}},[s("percent-circle",{attrs:{width:25,"percent-done":t.calculatePercentDone(e.row),"bg-percent":t.isAllTaskDone(e.row)?"#39D92A":"#FF9B25"}})],1),s("div",{staticClass:"d-flex flex-column guaranteed"},[s("span",{staticClass:"name"},[t._v(t._s(e.row.target_name))]),s("span",{staticClass:"sologun"},[t._v(t._s(null==e.row.target_description?"Chưa có mô tả":e.row.target_description))])])])]}}])}),s("el-table-column",{attrs:{"header-align":"center",width:"200",label:"Phụ trách"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"d-flex align-items-center"},[s("AvatarTooltip",{attrs:{name:e.row.user_name}}),s("div",{staticClass:"d-flex flex-column guaranteed"},[s("span",{staticClass:"name"},[t._v(t._s(e.row.user_name))]),s("span",{staticClass:"sologun"},[t._v(t._s(e.row.user_title))])])],1)]}}])}),s("el-table-column",{attrs:{align:"center",width:"90",label:"Hoàn thành"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"name"},[s("span",{staticStyle:{color:"#39D92A"}},[t._v(t._s(e.row.done))]),t._v("/"+t._s(e.row.total))])]}}])}),s("el-table-column",{attrs:{align:"center",width:"130",label:"Không hoàn thành"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"name",staticStyle:{color:"#F52121"}},[t._v(t._s(e.row.not_done))])]}}])}),s("el-table-column",{attrs:{align:"center",width:"110",label:"Thời hạn"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"name"},[t._v(t._s(t.formatDate(e.row.deadline)))])]}}])})],1)],1)])]),s("el-col",{attrs:{span:5}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Top hoàn thành mục tiêu")]),s("div",{staticClass:"content project-work-item-2"},[t.reportUser.targets&&t.reportUser.targets.length>0?t._l(t.reportUser.targets,(function(e){return s("div",{key:e.id,staticClass:"element"},[s("div",{staticClass:"d-flex flex-row"},[s("AvatarTooltip",{attrs:{name:e.user.name}}),s("div",{staticClass:"info d-flex flex-column"},[s("span",{staticClass:"name"},[t._v(t._s(e.user.name))]),s("span",{staticClass:"text"},[s("span",{staticClass:"strong"},[t._v(t._s(e.tasks_target_done)+"/"+t._s(e.tasks))]),t._v(" mục tiêu hoàn thành")])])],1)])})):t._e(),!t.reportUser.targets||t.reportUser.targets&&0==t.reportUser.targets.length?s("div",[s("span",{staticClass:"not-found"},[t._v("Không có thành viên hoàn thành mục tiêu !")])]):t._e()],2)])])],1)],1),s("section",{staticClass:"project-depth"},[s("span",{staticClass:"header-section"},[t._v("Các báo cáo chuyên sâu khác")]),s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Các con số thống kê")]),s("div",{staticClass:"content"},[s("div",{staticClass:"element d-flex justify-content-around"},[s("div",{staticClass:"element-sub d-flex flex-column align-items-center"},[s("span",{staticClass:"number",domProps:{textContent:t._s(t.reportExtend.extend?t.reportExtend.extend.averageWeek:0)}}),s("span",{staticClass:"text"},[t._v("Số công việc trung bình trên 1 tuần ")])]),s("div",{staticClass:"element-sub d-flex flex-column align-items-center"},[s("span",{staticClass:"number",domProps:{textContent:t._s(t.reportExtend.extend?t.reportExtend.extend.averageStaff:0)}}),s("span",{staticClass:"text"},[t._v("Số công việc trung bình hàng tuần trên 1 người")])])]),s("div",{staticClass:"element element-2 d-flex justify-content-around"},[s("div",{staticClass:"element-sub d-flex flex-column align-items-center"},[s("span",{staticClass:"number",domProps:{textContent:t._s(t.reportExtend.extend?t.reportExtend.extend.averageProject:0)}}),s("span",{staticClass:"text"},[t._v("Số công việc trung bình trên một dự án")])]),s("div",{staticClass:"element-sub d-flex flex-column align-items-center"},[s("span",{staticClass:"number",domProps:{textContent:t._s(t.reportExtend.extend?t.reportExtend.extend.comments:0)}}),s("span",{staticClass:"text"},[t._v("Tổng số lượng bình luận")])])])])])]),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Báo cáo thời gian làm việc theo dự án")]),s("div",{staticClass:"content"},[s("div",{staticClass:"element d-flex justify-content-around"},[s("div",{staticClass:"element-sub d-flex flex-column align-items-center"},[s("span",{staticClass:"text"},[t._v("Tổng thời gian làm việc")]),s("span",{staticClass:"number worked-time-str",domProps:{textContent:t._s(t.worked_time_str)}})]),s("div",{staticClass:"element-sub d-flex flex-column align-items-center"},[s("span",{staticClass:"text"},[t._v("Tổng số công việc")]),s("span",{staticClass:"number",domProps:{textContent:t._s(t.reportExtend.times?t.reportExtend.times.tasks:0)}})])]),s("div",{staticClass:"element element-2 d-flex justify-content-around"},[s("div",{staticClass:"element-sub element-sub-2 d-flex flex-column align-items-center"},[s("span",{staticClass:"text"},[t._v("Thời gian trung bình làm 1 công việc(h)")]),s("span",{staticClass:"number",domProps:{textContent:t._s(t.reportExtend.times?t.reportExtend.times.average:0)}})])])])])])],1)],1)],1)},P=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"project-score-wrap d-flex justify-content-center align-items-center"},[s("span",{staticClass:"score"},[t._v("Điểm dự án ("),s("span",{staticClass:"strong"},[t._v("86")]),t._v("/100)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-sub d-flex align-items-center"},[s("span",{staticClass:"circle color-2"}),s("span",{staticClass:"count-sub text"}),s("span",{staticClass:"title-sub text"},[t._v("Tính theo ngày làm việc của công ty")])])}],I=(s("4e82"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dropdown d-flex justify-content-center align-items-center",class:[0==this.active?"not-active":""],on:{click:t.toggleShow}},[s("span",{staticClass:"text-primary"},[t._v(" "+t._s(t.active?t.textPrimary:t.label)+" "),t.active?s("i",{staticClass:"el-icon-arrow-down font-weight-bold "}):t._e()]),t.showMenuTop?s("div",{staticClass:"menu"},t._l(t.items,(function(e,a){return s("div",{key:e.key,staticClass:"item",class:[e.key===t.keyPrimary?"active":""],on:{click:function(s){return t.select(e)}}},[s("div",{staticClass:"content",class:[a==t.items.length-1?"last":""]},[s("span",[t._v(t._s(e.value))])])])})),0):t._e()])}),F=[],E=s("2ef0"),O={name:"Dropdown",props:{items:{type:Array,required:!1,default:function(){return[]}},label:{type:[String],required:!1,default:""},active:{type:Boolean,required:!1,default:!0}},data:function(){return{showMenuTop:!1,textPrimary:"",keyPrimary:""}},mounted:function(){this.label&&(this.textPrimary=this.label),this.active&&(this.keyPrimary=this.items[0].key,this.textPrimary=this.items[0].value)},methods:{toggleShow:function(){this.active&&(this.showMenuTop=!this.showMenuTop)},select:function(t){this.textPrimary=t.value,this.keyPrimary=t.key,this.$emit("change",t)}}},L=O,B=(s("957c7"),Object(_["a"])(L,I,F,!1,null,"3ae8814f",null)),G=B.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dropdown d-flex justify-content-between align-items-center"},[s("span",{staticClass:"text-primary d-flex justify-content-center align-items-center",on:{click:t.toggleShow}},[s("i",{staticClass:"el-icon-date"}),s("span",[t._v(t._s(t.textPrimary))])]),t.dateTime?s("span",{staticClass:"icon-clode d-flex justify-content-center align-items-center",on:{click:t.closeDateTime}},[s("i",{staticClass:"el-icon-close"})]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMenuTop,expression:"showMenuTop"}],staticClass:"menu"},[s("el-date-picker",{ref:"inputDateTime",staticClass:"datetime-custom",attrs:{type:"daterange","value-format":"dd/MM/yyyy","range-separator":"","start-placeholder":"","end-placeholder":""},on:{change:t.change},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1)])},U=[],M=(s("ac1f"),s("1276"),{name:"Timedown",props:{},data:function(){return{showMenuTop:!1,textPrimary:"Tất cả thời gian",dateTime:""}},mounted:function(){},methods:{toggleShow:function(){this.showMenuTop=!this.showMenuTop,this.showMenuTop&&this.$refs["inputDateTime"].focus()},change:function(){this.showMenuTop=!1,this.textPrimary=this.dateTime[0]+" - "+this.dateTime[1];var t=this.dateTime[0].split("/");t=new Date(t[2],t[1]-1,t[0]);var e=this.dateTime[1].split("/");e=new Date(e[2],e[1]-1,e[0]);var s={from_date:t.getTime(),to_date:e.getTime()};this.$emit("change",s)},closeDateTime:function(){this.showMenuTop=!1,this.dateTime="",this.textPrimary="Tất cả thời gian";var t={from_date:"",to_date:""};this.$emit("change",t)}}}),Q=M,R=(s("deb3"),s("27dc"),Object(_["a"])(Q,N,U,!1,null,"7386ed3e",null)),W=R.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.className,style:{height:t.height,width:t.width}})},q=[],H=(s("b64b"),s("313e")),J=s.n(H),V=1500,K="20px",X={name:"StackChart",props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},chartData:{type:Object,default:function(){return{data:[],series:{}}}}},data:function(){return{}},watch:{chartData:function(t,e){this.chart=null,this.initChart()}},mounted:function(){var t=this;this.$nextTick((function(){t.chartData.date&&t.chartData.date.length>0&&t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var t={todo:0,doing:0,review:0,done:0,done_late:0,out_date:0};Object.keys(this.chartData.date).length>0&&(t.todo=this.chartData.series.todo,t.doing=this.chartData.series.doing,t.review=this.chartData.series.review,t.done_late=this.chartData.series.done_late,t.out_date=this.chartData.series.out_date,t.done=this.chartData.series.done),this.chart=J.a.init(this.$el),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"line"}},legend:{show:!0,left:"left",textStyle:{fontSize:10},itemWidth:7,itemHeight:7,data:["Chưa bắt đầu","Đang làm","Hoàn thành","Chờ review","Hoàn thành muộn","Quá hạn"]},grid:{left:"25px",right:"10px",bottom:"10px",containLabel:!0,borderColor:"#fff"},title:{show:0===Object.keys(this.chartData.date).length,textStyle:{color:"grey",fontSize:16},text:"Không có dữ liệu",left:"center",top:"center"},xAxis:[{type:"category",data:this.chartData.date,axisLine:{show:!1,onZero:!0},axisTick:{show:!1,alignWithLabel:!0},axisLabel:{color:"#4D4D4D",fontSize:10,margin:10}}],yAxis:[{type:"value",offset:0,name:"Tổng số lượng công việc",nameLocation:"center",nameTextStyle:{lineHeight:35,color:"#4D4D4D",fontSize:"11"},axisLine:{show:!1,onZero:!0},axisTick:{show:!1},axisLabel:{color:"#4D4D4D",fontSize:10,margin:5},splitLine:{show:!0,lineStyle:{color:"#B8D3E8"}}}],series:[{name:"Chưa bắt đầu",type:"bar",stack:"vistors",barWidth:K,color:"#4D4D4D",borderRadius:0,data:t.todo,animationDuration:V},{name:"Đang làm",type:"bar",stack:"vistors",barWidth:K,color:"#198CFF",data:t.doing,animationDuration:V},{name:"Hoàn thành",type:"bar",stack:"vistors",barWidth:K,color:"#39D92A",data:t.done,animationDuration:V},{name:"Chờ review",type:"bar",stack:"vistors",barWidth:K,color:"#FFD527",data:t.review,animationDuration:V},{name:"Hoàn thành muộn",type:"bar",stack:"vistors",barWidth:K,color:"#FF9B30",data:t.done_late,animationDuration:V},{name:"Quá hạn",type:"bar",stack:"vistors",barWidth:K,color:"#F52121",data:t.out_date,animationDuration:V}]})}}},Y=X,Z=Object(_["a"])(Y,z,q,!1,null,"40458a1c",null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.className,staticStyle:{height:"155px",width:"300px"}})},st=[];s("159b");s("817d");var at={name:"StackChart1",props:{className:{type:String,default:"chart"},width:{type:String,default:"100"},height:{type:String,default:"155px"}},data:function(){return{}},computed:{chartData:{get:function(){var t=this.$store.getters.selectedProject;return t?t.task_summery:{}},set:function(t){return t}},taskReport:function(){return this.$store.getters["task/taskReport"]},report:function(){var t=this.$store.getters["report/user"],e={total_tasks_confirm:0,total_tasks_new:0,total_tasks_doing:0,total_tasks_review:0,total_tasks_done:0,total_tasks_done_late:0,total_tasks_out_date:0};return 0===Object.values(t.all).length||t.all.forEach((function(t){e.total_tasks_confirm+=t.total_tasks_confirm,e.total_tasks_new+=t.total_tasks_todo,e.total_tasks_doing+=t.total_tasks_doing,e.total_tasks_review+=t.total_tasks_review,e.total_tasks_done+=t.total_tasks_done,e.total_tasks_done_late+=t.total_tasks_done_late,e.total_tasks_out_date+=t.total_tasks_out_date})),e}},watch:{chartData:function(t,e){this.chart.dispose(),this.chart=null,this.initChart()}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var t=this.report.total_tasks_confirm+" Chờ xác nhận",e=this.report.total_tasks_new+" Chưa bắt đầu",s=this.report.total_tasks_doing+" Đang làm",a=this.report.total_tasks_done+" Hoàn thành",n=this.report.total_tasks_review+" Chờ review",i=this.report.total_tasks_done_late+" Hoàn thành muộn",o=this.report.total_tasks_out_date+" Quá hạn";this.chart=J.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"axis",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"60%",top:"15",width:"100%",textStyle:{fontSize:10,fontFamily:"sans-serif"},itemWidth:7,itemHeight:7,data:[t,e,s,a,n,i,o]},series:[{name:"访问来源",type:"pie",radius:["73%","85%"],avoidLabelOverlap:!1,center:["30%","50%"],label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"10",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:this.report.total_tasks_confirm,name:t,itemStyle:{color:"#8e44ad"}},{value:this.report.total_task_new,name:e,itemStyle:{color:"#232323"}},{value:this.report.total_tasks_doing,name:s,itemStyle:{color:"#198CFF"}},{value:this.report.total_tasks_done,name:a,itemStyle:{color:"#39D92A"}},{value:this.report.total_tasks_review,name:n,itemStyle:{color:"#FFD527"}},{value:this.report.total_tasks_done_late,name:i,itemStyle:{color:"#FF9B25"}},{value:this.report.total_tasks_out_date,name:o,itemStyle:{color:"#F52121"}}]}],color:["#232323","#198CFF","#39D92A","#FFD527","#FF9B25","F52121"]})}}},nt=at,it=Object(_["a"])(nt,et,st,!1,null,"0f992560",null),ot=it.exports,rt=s("a7e3"),lt=s.n(rt),ct=s("a18d"),ut=s("59f4"),dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"project-status-wrap"},[s("div",{staticClass:"ww-body-scroll scroll-task-group"},t._l(t.taskGroups,(function(e){return s("div",{key:e.task_group_id,staticClass:"task-group"},[s("div",{staticClass:"item d-flex flex-column"},[s("span",{staticClass:"status",domProps:{textContent:t._s(e.name)}}),s("span",[s("span",{staticClass:"count",domProps:{textContent:t._s(t.formatNumberLessMoreTen(e.tasks.length,"00"))}}),s("span",{staticClass:"text"},[t._v("Công việc")])]),s("span",{staticClass:"percent",domProps:{textContent:t._s((t.totalTasks>0?Math.round(e.tasks.length/t.totalTasks*100):0)+"%")}})])])})),0)])},pt=[],ht={computed:{taskGroups:function(){return this.$store.getters["taskGroup/list"]},totalTasks:function(){var t=0;return 0===this.taskGroups.length||this.taskGroups.forEach((function(e){t+=e.tasks.length})),t}}},mt=ht,_t=(s("0563"),Object(_["a"])(mt,dt,pt,!1,null,null,null)),ft=_t.exports,gt={name:"TabReport",components:{dropDown:G,timeDown:W,stackChart:tt,pieChart:ot,ProgressBar:lt.a,AvatarTooltip:ct["a"],PercentCircle:ut["a"],TaskGroup:ft},data:function(){return{loading:!1,filter:{by:"created_at",type:null,from_date:"",to_date:""},byTime:[{key:"created_at",value:"Báo cáo theo ngày tạo"},{key:"deadline_from",value:"Báo cáo theo thời hạn"},{key:"in_progress_at",value:"Báo cáo theo ngày bắt đầu"}],byType:[{key:null,value:"Công việc và công việc con"},{key:"parent",value:"Không tính công việc con"}],statusworks:[{color:"#4D4D4D",value:"02",text:"Chưa bắt đầu"},{color:"#198CFF",value:"11",text:"Đang làm"},{color:"#39D92A",value:"03",text:"Hoàn thành"},{color:"#FFD527",value:"04",text:"Chờ review"},{color:"#FF9B25",value:"04",text:"Hoàn thành muộn"},{color:"#F52121",value:"01",text:"Quá hạn"}],report:{department:{name:"4"},task_summery:{total_task:0,total_task_done:0,total_task_new:0,total_task_in_progress:0,total_task_in_review:0,total_task_done_late:0,total_task_out_date:0},task_summery_detail_by_user:{total_duration:0,detail:[]},target_summery:{total:1,total_done:0,details:[]},user_summery:{total_staff:10,total_customer:0},task_duration_summery:{total:0,total_duration:null},total_comment:0,weekly:{total:4,total_week:1,total_weekend:0}},topUserDone:[],topUserMore:[],topUserSuccess:[],doing:0,done:0,target_doing:0,target_done:0,result:0,result_empty:0,worked_time:0,worked_time_str:""}},computed:{selectedProjectId:{set:function(t){this.$store.dispatch("project/setSelectedProjectId",t)},get:function(){return this.$store.getters.selectedProjectId}},reportCount:function(){return this.$store.getters["report/project"]},dayAndWeeks:function(){return this.$store.getters["report/dayWeek"]},reportExtend:function(){return this.$store.getters["report/extend"]},reportUser:function(){return this.$store.getters["report/user"]},reportTargets:function(){return this.$store.getters["report/targets"]}},watch:{"filter.type":function(t){this.setDataReport(t)},reportCount:function(t){this.setDataReport(this.filter.type)}},mounted:function(){this.fetchReport()},methods:{fetchReport:function(){var t=this,e=this.$route.params.projectId;this.loading=!0,d["a"].get("project/"+e+"/report",{params:this.filter}).then((function(e){switch(t.loading=!1,e.code){case 200:t.report=e.data,setTimeout((function(){t.getTopUserSuccess()}),800),setTimeout((function(){t.getTableUser()}),1200);break;default:break}})),this.$store.dispatch("report/fetchReportDayWeek",{projectId:this.$route.params.projectId,params:this.filter})},calculatePercentOutDate:function(t){var e=t.total_task,s=t.total_task_out_date;return e?s/e*100:0},calculatePercentDoneLate:function(t){var e=t.total_task,s=t.total_task_done_late;return e?s/e*100:0},calculatePercentDone:function(t){var e=t.done,s=t.not_done;return e&&s?e/(e+s)*100:0},isAllTaskDone:function(t){var e=t.total_task,s=t.total_task_done;return 0!==e&&s===e},getTableUser:function(){var t=this.report.task_summery,e=this.report.task_summery_detail_by_user,s=t.total_task-e.total_task,a=t.total_task_new-e.total_task_new,n=t.total_task_in_progress-e.total_task_in_progress,i=t.total_task_in_review-e.total_task_review,o=t.total_task_done-e.total_task_done,r=t.total_task_done_late-e.total_task_done_late,l=t.total_task_out_date-e.total_task_out_date,c=t.total_working_time-e.total_working_time,u={total:s,total_new:a,total_in_progress:n,total_review:i,total_done:o,total_done_late:r,total_out_date:l,total_duration:0,total_working_time:c};this.report.task_summery_detail_by_user.detail.unshift({name:"Chưa phân giao",task_summery:u})},getTotalWorkingTime:function(t){return t<60?t+" p":Math.round(t/60*10)/10+" h"},getTopUserDone:function(){var t=JSON.parse(JSON.stringify(this.report.task_summery_detail_by_user.detail));if(t.length){t.sort((function(t,e){return parseFloat(t.task_summery.total_done)-parseFloat(e.task_summery.total_done)})),t=t.reverse();for(var e=[],s=t.length<=2?t.length:3,a=0;a<s;a++)t[a].task_summery.total_done&&e.push(t[a]);this.topUserDone=e}},getTopUserMore:function(){var t=JSON.parse(JSON.stringify(this.report.task_summery_detail_by_user.detail));if(t.length){t.sort((function(t,e){var s=t.task_summery.total_new+t.task_summery.total_in_progress+t.task_summery.total_review,a=e.task_summery.total_new+e.task_summery.total_in_progress+e.task_summery.total_review;return parseFloat(s)-parseFloat(a)})),t=t.reverse();for(var e=[],s=t.length<=2?t.length:3,a=0;a<s;a++){var n=t[a].task_summery.total_new+t[a].task_summery.total_in_progress+t[a].task_summery.total_review;n&&e.push(t[a])}this.topUserMore=e}},getTopUserLate:function(){var t=JSON.parse(JSON.stringify(this.report.task_summery_detail_by_user.detail));if(t.length){t.sort((function(t,e){var s=t.task_summery.total_out_date+t.task_summery.total_done_late,a=e.task_summery.total_out_date+e.task_summery.total_done_late;return parseFloat(s)-parseFloat(a)})),t=t.reverse();for(var e=[],s=t.length<=2?t.length:3,a=0;a<s;a++){var n=t[a].task_summery.total_out_date+t[a].task_summery.total_done_late;n&&e.push(t[a])}this.topUserLate=e}},getTopUserSuccess:function(){var t=JSON.parse(JSON.stringify(this.report.target_summery.details));if(t.length){t=t.filter((function(t){return!0===t.is_done}));for(var e=[],s=t.length<=2?t.length:3,a=0;a<s;a++)e.push(t[a]);this.topUserSuccess=e}},deptGetTotalWorkingTime:function(t){return t<60?t+" p":Math.round(t/60*10)/10+" h"},deptDetTotalWorkingTimeTB:function(t,e){return 0===e?"0 phút /công việc":t<60?Math.round(t/e*10)/10+" phút/công việc":Math.round(t/60/e*10)/10+"giờ /công việc"},changeDate:function(t){this.filter.from_date=t.from_date,this.filter.to_date=t.to_date,this.filter.date=[t.from_date/1e3,t.to_date/1e3],this.fetchReport()},changeTime:function(t){this.filter.by=t.key,this.fetchReport()},setDataReport:function(t){this.reportCount&&(this.doing=t?this.reportCount.parent_doing:this.reportCount.total_doing,this.done=t?this.reportCount.parent_done:this.reportCount.total_done,this.target_doing=t?this.reportCount.parent_target_doing:this.reportCount.target_doing,this.target_done=t?this.reportCount.parent_target_done:this.reportCount.target_done,this.result=t?this.reportCount.parent_result:this.reportCount.result,this.result_empty=t?this.reportCount.parent_result_empty:this.reportCount.result_empty,this.worked_time=t?this.reportCount.parent_worked_time:this.reportCount.total_worked_time,this.worked_time_str=t?this.reportCount.parent_worked_time_string:this.reportCount.total_worked_time_string)},changeType:function(t){this.filter.type=t.key}}},vt=gt,kt=(s("399d"),s("0495"),s("cff0"),s("5f67"),s("3d70"),s("93f2"),s("97b0"),s("0ca3"),s("03e6"),s("fb4d"),s("87a8"),s("bd26"),Object(_["a"])(vt,A,P,!1,null,"65803989",null)),Ct=kt.exports,bt=s("b4a1"),yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"project-task-trello",on:{click:function(e){return t.hideDropDownList(e.target)}}},[s("div",{staticClass:"scroll-task-group"},[s("draggable",t._b({attrs:{group:"people-home",draggable:".item"},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1},change:t.logTaskGroup},model:{value:t.task_groups,callback:function(e){t.task_groups=e},expression:"task_groups"}},"draggable",t.dragOptions,!1),[t._l(t.task_groups,(function(e,a){return s("div",{key:e.task_group_id,staticClass:"task-group",class:0==a?"":"item"},[s("div",{staticClass:"task-group-title d-flex justify-content-center align-items-center",style:{"border-bottom-color":e.color}},[s("div",{staticClass:"d-flex align-items-center"},[s("span",{staticClass:"text-overflow",staticStyle:{"--maxWidth":"205px"}},[t._v(t._s(e.name))]),e.point?s("span",{staticClass:"item-point d-flex justify-content-center align-items-center",style:{"border-color":e.color,color:e.color}},[t._v(" "+t._s(e.point)+" ")]):t._e()]),s("span",{staticClass:"more-action-icon",attrs:{title:"Thêm công việc"},on:{click:function(s){return t.addTask(e)}}},[s("i",{staticClass:"el-icon-plus"})]),e.task_group_id?s("span",{staticClass:"more-action-icon dropdown-action",on:{click:function(e){return t.showAction(a)}}},[s("i",{staticClass:"el-icon-more"})]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.dropdownActions[a],expression:"dropdownActions[index]"}],staticClass:"more-action-list",on:{mouseleave:t.mouseLeave,click:function(s){return t.handleClickShowDialogEdit(e)}}},[s("div",{staticClass:"more-action-list-item d-flex align-items-center"},[s("span",[t._v("Chỉnh sửa nhóm CV")])]),s("div",{staticClass:"more-action-list-item d-flex align-items-center",on:{click:function(s){return s.stopPropagation(),t.confirmDeleteGroupTask(e)}}},[s("span",{staticClass:"more-action-list-item-last"},[t._v("Xóa")])])])]),s("draggable",t._b({staticClass:"task-group-list",attrs:{group:"people"},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1},change:t.logTask},model:{value:e.tasks,callback:function(s){t.$set(e,"tasks",s)},expression:"item.tasks"}},"draggable",t.dragOptions,!1),t._l(e.tasks,(function(e){return s("div",{key:e.task_id,staticClass:"task-group-item",on:{click:function(s){return t.handleClickShowDrawerTaskDetail(e)}}},[s("div",{staticClass:"info-task"},[s("div",{staticClass:"d-flex justify-content-between"},[s("div",{staticClass:"name-task"},[s("mark-complete",{attrs:{task:e}}),s("span",{staticClass:"title"},[t._v(t._s(e.name))])],1),s("span",{staticClass:"delete-task d-flex justify-content-center align-items-center",on:{click:function(s){return s.stopPropagation(),t.confirmDeleteTask(e)}}},[s("svg-icon",{attrs:{"icon-class":"trash"}})],1)]),s("div",{staticClass:"time-task d-flex justify-content-between align-items-center"},[s("div",{staticClass:"d-flex flex-column"},[s("span",{staticClass:"deadline"},[s("span",[t._v(t._s(t.formatDate(e.deadline_from)))]),s("span",[t._v("- "+t._s(t.formatDate(e.deadline_to)))])]),s("span",{staticClass:"deadline"},[t._v("Tạo bởi "+t._s(e.user.name.substr(0,20)))])]),s("span",{staticClass:"set-assignee"},[e.assignee?s("user-avatar",{attrs:{user:e.assignee,"border-radius":50,width:20}}):t._e()],1)]),s("div",{staticClass:"list-label task-info"},[s("div",[s("task-state",{attrs:{task:e},on:{afterUpdate:t.fetchListTaskGroup}}),e.priority?s("span",{staticClass:"priority",class:"priority-"+e.priority},[t._v(t._s(t.getPriorityTextById(e.priority)))]):t._e(),e.extend_state?s("span",{staticClass:"state",class:"state-"+e.extend_state,staticStyle:{"padding-right":"5px"}},[t._v(t._s(t.getStateTextById(e.extend_state)))]):t._e()],1),e.sub_tasks.length>0?s("div",{staticClass:"subtask-info"},[s("span",{staticClass:"quantity",domProps:{textContent:t._s(t.formatNumberLessMoreTen(e.sub_tasks.length))}}),s("i",{staticClass:"el-icon-share"})]):t._e()])])])})),0)],1)})),s("div",{staticClass:"task-group"},[s("div",{staticClass:"task-group-title task-group-title-add d-flex justify-content-center align-items-center",on:{click:t.handleClickShowDialog}},[s("span",[t._v("+ Thêm mới")])]),s("div",{staticClass:"task-group-list"})])],2)],1),s("task-group-form",{ref:"task_group_form",attrs:{"total-point-avaiable":t.totalPointAvaiable},on:{afterCreate:t.fetchListTaskGroup}}),s("task-group-form-edit",{ref:"task_group_form_edit",attrs:{"task-group":t.selectedTaskGroup},on:{afterUpdate:t.fetchListTaskGroup}}),s("save-form",{ref:"save_form",attrs:{"project-id":t.selectedProjectId,"task-group-id":t.selectedTaskGroupId},on:{"update:projectId":function(e){t.selectedProjectId=e},"update:project-id":function(e){t.selectedProjectId=e},reloadList:t.fetchListTaskGroup}}),s("drawer-task-detail",{ref:"drawer_task_detail"}),s("dialog-assignee",{ref:"dialog_assignee",attrs:{"task-id":t.selectedTask.task_id}})],1)},wt=[],xt=s("b76a"),Tt=s.n(xt),jt=s("857d"),Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:"Cập nhật nhóm",visible:t.dialogFormVisible,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("el-form",{ref:"dataFormEdit",staticClass:"form-data form-project",staticStyle:{width:"100%"},attrs:{model:t.modelData,"label-position":"top","label-width":"160px",rules:t.rules,size:"small"}},[s("el-form-item",{attrs:{label:"Tên nhóm *",prop:"name"}},[s("el-input",{attrs:{placeholder:"Nhập tên nhóm"},model:{value:t.modelData.name,callback:function(e){t.$set(t.modelData,"name",e)},expression:"modelData.name"}})],1),s("el-form-item",{attrs:{label:"Điểm *",prop:"point"}},[s("el-input",{attrs:{type:"age",placeholder:"Nhập điểm"},model:{value:t.modelData.point,callback:function(e){t.$set(t.modelData,"point",e)},expression:"modelData.point"}})],1),s("color-list",{attrs:{"current-color":this.modelData.task_color_id},on:{afterSelect:t.selectColor}},[s("div",{staticClass:"el-form-item--small"},[s("label",{staticClass:"el-form-item__label"},[t._v("Màu sắc")])])])],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("ĐÓNG")]),s("el-button",{attrs:{type:"primary",size:"small",disable:!t.canSubmit,loading:!t.canSubmit},on:{click:function(e){return t.submitForm()}}},[t._v("Cập nhật")])],1)],1)},St=[],$t={name:"TaskGroupFormEdit",components:{ColorList:p["a"]},props:{taskGroup:{type:Object,default:function(){return{}}}},data:function(){return{canSubmit:!0,dialogFormVisible:!1,modelData:{name:"",point:"",task_color_id:1,project_id:""},rules:{name:[{required:!0,message:"Vui lòng nhập tên nhóm"},{min:2,max:191,message:"Tên nhóm có chiều dài từ 2 tới 191 kí tự"}]}}},watch:{taskGroup:function(){this.modelData.name=this.taskGroup.name,this.modelData.point=this.taskGroup.point,this.modelData.task_group_id=this.taskGroup.task_group_id,this.modelData.task_color_id=this.taskGroup.color_id}},mounted:function(){this.modelData.project_id=parseInt(this.$route.params.projectId)},methods:{showDialog:function(){this.dialogFormVisible=!0},hideDialog:function(){this.dialogFormVisible=!1},resetFormData:function(){this.$refs["dataFormEdit"].resetFields()},selectColor:function(t){this.modelData.task_color_id=t},submitForm:function(){var t=this;this.$refs["dataFormEdit"].validate((function(e){e&&t.storeModel()}))},storeModel:function(){var t=this;this.canSubmit=!1,d["a"].post("task-group/"+this.modelData.task_group_id+"/update",this.modelData).then((function(e){switch(t.canSubmit=!0,e.code){case 200:t.$notify({title:"Thành công",message:"Cập nhật thành công",type:"success"}),t.resetFormData(),t.hideDialog();var s=e.data;t.$emit("afterUpdate",s);break;default:break}}))}}},At=$t,Pt=Object(_["a"])(At,Dt,St,!1,null,"1f4ccc6c",null),It=Pt.exports,Ft=s("3220"),Et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-drawer",{staticClass:"ww-drawer",attrs:{visible:t.drawer,direction:"rtl",size:"39%","with-header":!1},on:{"update:visible":function(e){t.drawer=e}}},[s("task-detail",{attrs:{"is-trello":!0}})],1)},Ot=[],Lt=s("1da1"),Bt=(s("96cf"),s("7f6d")),Gt=s("b199"),Nt={name:"DrawerTaskDetail",components:{TaskDetail:Bt["a"]},data:function(){return{drawer:!1}},watch:{drawer:function(t){t||this.$store.dispatch("taskGroup/fetchTaskGroupsByProjectId",{projectId:this.$route.params.projectId,params:this.filter})}},methods:{showDialog:function(){var t=this;return Object(Lt["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.drawer=!0,e.next=3,Object(Gt["j"])(t.$store.getters.selectedTask.task_id);case 3:s=e.sent,t.$store.commit("task/SET_SELECTED_TASK",s.data);case 5:case"end":return e.stop()}}),e)})))()},hideDialog:function(){this.drawer=!1}}},Ut=Nt,Mt=(s("7048"),Object(_["a"])(Ut,Et,Ot,!1,null,"9a75121a",null)),Qt=Mt.exports,Rt=s("941b"),Wt=s("3b86"),zt={name:"ProjectTaskTrello",components:{draggable:Tt.a,TaskState:Ft["a"],taskGroupForm:g,taskGroupFormEdit:It,saveForm:r["a"],DrawerTaskDetail:Qt,DialogAssignee:Rt["a"],MarkComplete:jt["a"],UserAvatar:Wt["a"]},data:function(){return{drag:!1,loading:!1,filter:{limit:-1},selectedProjectId:0,selectedTaskGroupId:0,selectedTaskGroup:{},totalPointAvaiable:0,newIndex:0,selectedTask:{},dropdownActions:[]}},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}},task_groups:{get:function(){return this.$store.getters["taskGroup/list"]},set:function(t){this.$store.commit("taskGroup/SET_TASK_GROUPS",t)}},task_groups_clone:{get:function(){return this},set:function(){JSON.parse(JSON.stringify(this.task_groups))}}},mounted:function(){this.selectedProjectId=parseInt(this.$route.params.projectId),this.fetchListTaskGroup(),this.realtimeOrder()},methods:{getPriorityTextById:x["s"],getStateTextById:x["u"],handleClickShowDialog:function(){this.$refs.task_group_form.showDialog()},handleClickShowDialogEdit:function(t){this.selectedTaskGroup=t,this.$refs.task_group_form_edit.showDialog()},handleClickShowDrawerTaskDetail:function(t){this.$store.commit("task/SET_SELECTED_TASK",t),this.selectedTask=t,this.$refs.drawer_task_detail.showDialog()},handleOpenAssigneeDialog:function(t){this.selectedTask=t,this.$refs.dialog_assignee.showDialog()},fetchListTaskGroup:function(){this.loading=!0,this.$store.dispatch("taskGroup/fetchTaskGroupsByProjectId",{projectId:this.$route.params.projectId,params:this.filter}),this.loading=!1,this.caculatorTotolPointAvaiable()},caculatorTotolPointAvaiable:function(){var t=0,e=JSON.parse(JSON.stringify(this.task_groups));Object(E["forEach"])(e,(function(e,s){e.point&&(t+=e.point)})),this.totalPointAvaiable=100-t},addTask:function(t){this.selectedTaskGroupId=t.task_group_id,this.$refs.save_form.showDialog()},showAction:function(t){this.dropdownActions=[],this.dropdownActions[t]=!0},mouseLeave:function(){this.dropdownActions=[]},confirmDeleteGroupTask:function(t){var e=this;this.dropdownActions=[],t.showAction=!1,this.$confirm("Xác nhận xóa nhóm: "+t.name,"Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Đóng",type:"warning"}).then((function(){e.deleteGroupTask(t)})).catch((function(){}))},deleteGroupTask:function(t){var e=this;this.loading=!0,d["a"].delete("task-group/"+t.task_group_id).then((function(t){switch(e.loading=!1,t.code){case 200:e.fetchListTaskGroup();break;default:break}}))},logTaskGroup:function(t){var e=t.moved.element.task_group_id,s=0,a=t.moved.newIndex;a>0&&(s=this.task_groups[a-1].task_group_id);var n={prev_task_group_id:s};d["a"].post("task-group/"+e+"/reorder",n).then((function(t){}))},logTask:function(t){var e=this;if(t.added)this.newIndex=t.added.newIndex;else{var s=t.moved?t.moved.element:t.removed.element,a=0,n=0;Object(E["forEach"])(this.task_groups,(function(t,e){Object(E["forEach"])(t.tasks,(function(e,i){e.task_id===s.task_id&&(a=t.task_group_id,i>0&&(n=t.tasks[i-1].task_id))}))}));var i={prev_task_id:n,task_group_id:a};d["a"].post("task/"+s.task_id+"/reorder",i).then((function(t){switch(t.code){case 200:e.task_groups_clone=JSON.parse(JSON.stringify(e.task_groups));break;default:e.task_groups=e.task_groups_clone;break}}))}},confirmDeleteTask:function(t){var e=this;this.$confirm("Xác nhận xóa task: "+t.name,"Warning",{confirmButtonText:"Xác nhận",cancelButtonText:"Đóng",type:"warning"}).then((function(){e.deleteTask(t)})).catch((function(){}))},deleteTask:function(t){var e=this;this.loading=!0,d["a"].delete("task/"+t.task_id).then((function(t){switch(e.loading=!1,t.code){case 200:e.fetchListTaskGroup();break;default:break}}))},hideDropDownList:function(t){"el-icon-more"!==t.className&&(this.dropdownActions=[])},realtimeOrder:function(){var t=this;window.Echo.channel("reorder-task-channel-"+this.$route.params.projectId).listen(".pushed",(function(e){var s=e._taskGroups;t.task_groups=Object.values(s)}))}}},qt=zt,Ht=(s("af38"),Object(_["a"])(qt,yt,wt,!1,null,"7681803c",null)),Jt=Ht.exports,Vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ww-calendar"},[s("el-row",{staticClass:"custom-filter"},[s("el-col",{attrs:{span:10}},[s("el-date-picker",{ref:"datepicker",staticClass:"month",attrs:{type:"month",placeholder:"Chọn tháng",format:"MMMM yyyy",clearable:!1,editable:!1},on:{change:function(e){return t.fetch()}},model:{value:t.listQuery.month,callback:function(e){t.$set(t.listQuery,"month",e)},expression:"listQuery.month"}}),s("i",{staticClass:"el-icon-arrow-down",on:{click:function(e){return t.$refs.datepicker.focus()}}})],1),s("el-col",{staticClass:"d-flex justify-content-end",attrs:{span:14}},[s("el-input",{staticClass:"task",attrs:{size:"small",placeholder:"Tên công việc"},on:{change:t.getList},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search",e)},expression:"listQuery.search"}}),s("el-select",{staticClass:"assignee",attrs:{clearable:"",placeholder:"Người xử lý"},on:{change:t.getList},model:{value:t.listQuery.assignee_id,callback:function(e){t.$set(t.listQuery,"assignee_id",e)},expression:"listQuery.assignee_id"}},t._l(t.current_project_users,(function(t){return s("el-option",{key:"user-"+t.user_id,attrs:{label:t.name,value:t.user_id}})})),1),t.states?[s("el-select",{staticClass:"state",attrs:{clearable:"",placeholder:"Trạng thái"},on:{change:t.getList},model:{value:t.listQuery.state,callback:function(e){t.$set(t.listQuery,"state",e)},expression:"listQuery.state"}},t._l(t.states,(function(t){return s("el-option",{key:"state-"+t.value,attrs:{label:t.title,value:t.value}})})),1)]:t._e(),s("el-dropdown",[s("span",{staticClass:"el-dropdown-link"},[t._v(" Hiển thị"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("el-checkbox",{attrs:{label:"Ngày bắt đầu"},on:{change:function(e){return t.showDateBy("in_progress_at")}},model:{value:t.date_by.in_progress_at,callback:function(e){t.$set(t.date_by,"in_progress_at",e)},expression:"date_by.in_progress_at"}})],1),s("el-dropdown-item",[s("el-checkbox",{attrs:{label:"Ngày kết thúc"},on:{change:function(e){return t.showDateBy("deadline_to")}},model:{value:t.date_by.deadline_to,callback:function(e){t.$set(t.date_by,"deadline_to",e)},expression:"date_by.deadline_to"}})],1),s("el-dropdown-item",[s("el-checkbox",{attrs:{label:"Ngày tạo"},on:{change:function(e){return t.showDateBy("created_at")}},model:{value:t.date_by.created_at,callback:function(e){t.$set(t.date_by,"created_at",e)},expression:"date_by.created_at"}})],1)],1)],1)],2)],1),s("el-calendar",{scopedSlots:t._u([{key:"dateCell",fn:function(e){var a=e.data;return[s("div",{staticClass:"tasks",style:"--background:"+(0==t.$moment(a.day).day()?"#F3F2F2":"#fffff")},[s("div",{staticClass:"tasks__date"},[t._v(" "+t._s(t.formatDate(a.day,{format:"D"}))+" ")]),t._l(t.filterByDate(t.formatDate(a.day,{format:"YYYY-MM-DD"})),(function(e){return s("div",{key:e.task_id,staticClass:"tasks__item",style:"--color:"+e.color+";--background:"+e.background+";",on:{click:function(s){return t.handleClickShowDrawerTaskDetail(e)}}},[s("user-avatar",{attrs:{user:e.assignee,"border-radius":50,width:20}}),s("div",{staticClass:"tasks__item--name pl-5",domProps:{textContent:t._s(e.name)}}),s("div",{staticClass:"tasks__item--count"},[s("span",{staticClass:"quantity",domProps:{textContent:t._s(e.subtask_count)}}),s("i",{staticClass:"el-icon-share"})])],1)}))],2)]}}]),model:{value:t.listQuery.month,callback:function(e){t.$set(t.listQuery,"month",e)},expression:"listQuery.month"}}),s("drawer-task-detail",{ref:"drawer_task_detail"})],1)},Kt=[],Xt={components:{UserAvatar:Wt["a"],DrawerTaskDetail:Qt},data:function(){return{listQuery:{assignee_id:"",state:"",month:new Date,search:"",date_by:"created_at"},date_by:{created_at:!0,in_progress_at:!1,deadline_to:!1},task:{}}},computed:{calendar:function(){return this.$store.getters["report/calendar"]},dialog:function(){var t=[];return Object(E["forEach"])(this.calendar,(function(e){t[e.task_id]=!1})),t},current_project_users:function(){return this.$store.getters.current_project_users},states:function(){return this.getFilterStateList()}},mounted:function(){this.fetch()},methods:{getFilterStateList:x["q"],fetch:function(){var t=this;return Object(Lt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.listQuery.month=t.$moment(t.listQuery.month).format("YYYY-MM-DD"),e.next=3,t.$store.dispatch("report/fetchCalendar",{projectId:t.$route.params.projectId,params:t.listQuery});case 3:case"end":return e.stop()}}),e)})))()},filterByDate:function(t){var e=this,s=Object(E["filter"])(this.calendar,(function(s){return s[e.listQuery.date_by]===t}));return s},getList:function(){this.fetch()},showDateBy:function(t){var e=this;Object(E["forEach"])(this.date_by,(function(t,s){e.date_by[s]=!1})),this.date_by[t]=!0,this.listQuery.date_by=t,this.fetch()},handleClickShowDrawerTaskDetail:function(t){this.$store.commit("task/SET_SELECTED_TASK",t),this.selectedTask=t,this.$refs.drawer_task_detail.showDialog()}}},Yt=Xt,Zt=(s("a09b"),Object(_["a"])(Yt,Vt,Kt,!1,null,null,null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wdg-avatar"},[s("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("circle",{attrs:{cx:"10",cy:"10",r:"10",fill:t.background}})]),s("span",{staticClass:"wdg-avatar__content",domProps:{textContent:t._s(t.getContent)}})])},se=[],ae={props:{background:{type:String,default:"#198CFF"},width:{type:Number,default:0},height:{type:Number,default:20},content:{type:String,default:""}},computed:{getContent:function(){return this.content?this.content.charAt(0).toUpperCase():""}}},ne=ae,ie=(s("2401"),Object(_["a"])(ne,ee,se,!1,null,"8fbd63a0",null)),oe=ie.exports,re=s("515e"),le=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wdg-state"},[s("span",{class:"state state-"+t.state},[t._v(t._s(t.getProjectStateText(t.state)))])])},ce=[],ue={props:{state:{type:Number,default:1}},methods:{getProjectStateText:re["d"]}},de=ue,pe=(s("f556"),Object(_["a"])(de,le,ce,!1,null,"7137a4a0",null)),he=pe.exports,me=s("828d"),_e=s("ee2e"),fe=s("24d2"),ge="ADMIN",ve={name:"ProjectIndex",components:{TabTaskList:$,ProjectTaskReport:Ct,ProjectTaskHistory:bt["a"],ProjectTaskTrello:Jt,ProjectTaskCalendar:te,Avatar:oe,State:he,RightBar:me["a"],TaskDetail:Bt["a"]},data:function(){return{tabMapOptions:[{label:"Công việc",key:"task"},{label:"Lịch sử hoạt động",key:"history"},{label:"Báo cáo",key:"report"},{label:"Tùy chỉnh",key:"setting"}],activeName:"task",createdTimes:0,setProject:{name:""},project_report:_e["a"],is_edit:!1}},computed:{percenTaskDone:function(){return 50},project:function(){return this.$store.getters.selectedProject},selectedId:{get:function(){return this.$store.getters.selectedTaskId},set:function(t){this.$store.dispatch("task/setSelectedTask",t)}},showType:{get:function(){var t=this.$createElement;return t("div",{directives:[{name:"if",value:"!is_edit"},{name:"text",value:"project.name"}],class:"project--name"}),this.$store.getters["task/showByType"]},set:function(t){this.$store.commit("task/SET_SHOW_TYPE",t)}},isShowRightBar:function(){return"task"===this.activeName&&"list"===this.showType},user:function(){return this.$store.getters["user/profile"]},selectedProject:function(){return this.$store.getters.selectedProject},isAllowDelete:function(){var t=this;return this.user.role===ge||Object.values(this.selectedProject.leader_ids.filter((function(e){return e.user_id===t.user.user_id}))).length>0},projects:{get:function(){return this.$store.getters.projects},set:function(t){this.$store.commit("share/SET_PROJECTS",t)}}},watch:{activeName:function(t){"report"===t&&this.$store.dispatch("report/fetchReport",{projectId:this.$route.params.projectId}),this.$router.push("".concat(this.$route.path,"?tab=").concat(t))},selectedId:function(t){document.getElementsByClassName("el-tabs__header")[0].style.display=t?"none":"block"}},updated:function(){this.$route.query.task_id&&(this.showType="list",this.activeName="task")},created:function(){this.$store.dispatch("project/setSelectedProjectId",this.$route.params.projectId),this.$store.dispatch("report/fetchReportProject",{projectId:this.$route.params.projectId}),this.$store.dispatch("report/fetchReportUser",this.$route.params.projectId);var t=this.$route.query.tab||"task";t&&(this.activeName=t)},methods:{getProjectStateText:re["d"],showCreatedTimes:function(){this.createdTimes=this.createdTimes+1},handleCommand:function(t){this.showType=t},closeDetail:function(){this.selectedId=null,this.$router.push({name:"project-task"})},appendActiveTypeInTaskTab:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"list";return this.showType===t?"active":""},updateProjectName:function(){var t=this;Object(fe["n"])(this.project.project_id,{name:this.project.name}).then((function(e){t.is_edit=!t.is_edit,t.$message.success("Cập nhật thành công!")}))},projectRemove:function(){var t=this;this.selectedProject&&this.$confirm("Bạn chắc chắn muốn xóa dự án ".concat(this.selectedProject.name," ?")).then((function(e){Object(fe["d"])(t.selectedProject.project_id).then((function(e){var s=t.projects,a=s.findIndex((function(e){return e.department_id===(t.selectedProject.department_id||0)}));-1!==a&&(s[a].projects=s[a].projects.filter((function(e){return e.project_id!==t.selectedProject.project_id})),t.projects=s,t.$router.push("/project/index"))}))}))}}},ke=ve,Ce=(s("176e"),Object(_["a"])(ke,a,n,!1,null,null,null));e["default"]=Ce.exports}}]);