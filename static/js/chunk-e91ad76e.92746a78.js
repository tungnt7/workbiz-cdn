(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e91ad76e"],{"0e8f":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return s})),a.d(e,"b",(function(){return o})),a.d(e,"e",(function(){return c})),a.d(e,"a",(function(){return l}));var n=a("b775"),r="/department";function i(t){return Object(n["a"])({url:r,method:"get",params:t})}function s(t){return Object(n["a"])({url:r+"/leader",method:"get",params:t})}function o(t){return Object(n["a"])({url:r+"/"+t,method:"get"})}function c(t,e){return Object(n["a"])({url:r+"/"+t+"/update",method:"post",data:e})}function l(t){return Object(n["a"])({url:r,method:"post",data:t})}},"56d1":function(t,e,a){"use strict";a("7bf7")},"6dc0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataForm",staticClass:"form-data",staticStyle:{width:"100%"},attrs:{model:t.formData,"label-position":"top","label-width":"140px",rules:t.rules,size:"small"}},[a("el-form-item",{attrs:{label:"Tên department *",prop:"name"}},[a("el-input",{attrs:{placeholder:"Nhập tên department"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"Người quản trị department",prop:"owner_ids"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Chọn người quản trị department",multiple:""},model:{value:t.formData.owner_ids,callback:function(e){t.$set(t.formData,"owner_ids",e)},expression:"formData.owner_ids"}},t._l(t.usersByAdmin,(function(t){return a("el-option",{key:"user-"+t.user_id,attrs:{label:t.name,value:t.user_id}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("ĐÓNG")]),a("el-button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:function(e){return t.handleCreateOrUpdate()}}},[t._v(t._s("create"==t.dialogStatus?"Thêm mới":"Cập nhật"))])],1)],1)},r=[],i=(a("a9e3"),a("d3b7"),a("0e8f")),s={name:"",owner_ids:[]},o={props:{formId:{type:Number,default:0},usersByAdmin:{type:Array,default:function(){return[]}}},data:function(){return{dialogStatus:"create",dialogFormVisible:!1,loading:!1,loadingBtn:!1,textMap:{update:"Chỉnh sửa department",create:"Tạo mới department"},formData:s,rules:{name:[{required:!0,message:"Chưa nhập tên department",trigger:"change"}]}}},watch:{formId:function(t,e){this.resetFormData(),t?(this.dialogStatus="update",t!=e&&this.getDepartment()):this.dialogStatus="create"}},methods:{showDialog:function(){this.dialogFormVisible=!0},hideDialog:function(){this.dialogFormVisible=!1},resetFormData:function(){this.$refs["dataForm"]&&this.$refs["dataForm"].resetFields()},showPwd:function(){var t=this.passwordType;this.passwordType="password"==t?"text":"password"},getDepartment:function(){var t=this,e=this.formId;e&&(this.loading=!0,Object(i["b"])(e).then((function(e){var a=e.data;t.formData=a})).finally((function(){t.loading=!1})))},handleCreateOrUpdate:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){t.loadingBtn=!0;var a=t.formId,n=t.formData;a?Object(i["e"])(a,n).then((function(e){var a=e.data;t.loading=!1,t.$message({type:"success",message:"Thành công"}),t.$store.dispatch("share/unshiftOrUpdateItem",{key:"departments",value:a,checkField:"department_id"}),t.hideDialog(),t.resetFormData(),t.$emit("reloadList",a)})).finally((function(){t.loadingBtn=!1})):Object(i["a"])(n).then((function(e){var a=e.data;t.loading=!1,t.$message({type:"success",message:"Thành công"}),t.$store.dispatch("share/unshiftOrUpdateItem",{key:"departments",value:a,checkField:"department_id"}),t.hideDialog(),t.resetFormData(),t.$emit("reloadList",a)})).finally((function(){t.loadingBtn=!1}))}}))}}},c=o,l=a("2877"),d=Object(l["a"])(c,n,r,!1,null,null,null);e["a"]=d.exports},"6edd":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-container"},[a("div",{staticClass:"tab-container"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("div",{staticClass:"seach-box"},[a("el-input",{attrs:{placeholder:"Tìm department",size:"mini"},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._l(t.tabMapOptions,(function(e){return a("el-tab-pane",{key:e.key,attrs:{label:e.label,name:e.key}},[a("keep-alive",[a("div",{staticClass:"custom-content"},[a("div",{staticClass:"page-header"},[a("el-row",{staticClass:"custom-filter"},[a("el-col",{attrs:{span:12}},[a("a",{staticClass:"new-task",on:{click:function(e){return t.handleClickShowDialog(null)}}},[a("el-button",{attrs:{type:"primary",size:"small",circle:""}},[a("svg-icon",{attrs:{"icon-class":"plus"}})],1),a("span",[t._v("Thêm mới department")])],1)])],1)],1),a("div",{staticClass:"page-content content-department"},[a("el-row",{attrs:{gutter:10}},t._l(t.filterDepartments,(function(e){return a("el-col",{key:e.department_id,staticClass:"department-item",attrs:{span:6}},[a("el-card",{attrs:{shadow:"hover"}},[a("h3",[t._v(t._s(e.name))]),a("span",[t._v("Tạo bởi @"+t._s(e.user?e.user.name:"Deleted")+" lúc "+t._s(e.created_at))])])],1)})),1)],1)])])],1)}))],2)],1),a("save-form",{ref:"save_form",attrs:{"users-by-admin":t.usersByAdmin},on:{reloadList:t.updateList}})],1)},r=[],i=(a("4de4"),a("caad"),a("2532"),a("b0c0"),a("99af"),a("6dc0")),s=a("0e8f"),o=a("cc5e"),c={name:"ProjectIndex",components:{saveForm:i["a"]},data:function(){return{tabMapOptions:[{label:"Department",key:"all"}],activeName:"all",createdTimes:0,departments:[],searchKeyword:"",usersByAdmin:[]}},computed:{filterDepartments:function(){var t=this.departments,e=this.searchKeyword;return t?t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})):{}}},watch:{activeName:function(t){this.$router.push("".concat(this.$route.path,"?tab=").concat(t))}},mounted:function(){this.$route.query.create&&(this.$router.push(this.$route.path),this.handleClickShowDialog())},created:function(){this.fetchList();var t=this.$route.query.tab;t&&(this.activeName=t)},methods:{fetchList:function(){var t=this;Object(s["c"])().then((function(e){var a=e.data;t.departments=a.data})),Object(o["d"])().then((function(e){t.usersByAdmin=e.data}))},updateList:function(t){var e=this.departments;e.unshift(t),this.departments=e},handleClickShowDialog:function(){this.$refs.save_form.showDialog()}}},l=c,d=(a("56d1"),a("2877")),u=Object(d["a"])(l,n,r,!1,null,"195eed82",null);e["default"]=u.exports},"7bf7":function(t,e,a){},cc5e:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"e",(function(){return o})),a.d(e,"a",(function(){return c})),a.d(e,"d",(function(){return l}));var n=a("b775"),r="/role";function i(){return Object(n["a"])({url:r,method:"get"})}function s(){return Object(n["a"])({url:r+"/share-list",method:"get"})}function o(t,e){return Object(n["a"])({url:"".concat(r,"/").concat(t,"/update"),method:"post",data:e})}function c(t){return Object(n["a"])({url:"".concat(r,"/").concat(t,"/detail"),method:"GET"})}function l(){return Object(n["a"])({url:r+"/users-by-admin",method:"get"})}}}]);